<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MYQER v23 - Emergency Medical Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
    
    * {
      font-family: 'Inter', system-ui, sans-serif;
    }

    /* Premium Glass Effect */
    .glass-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(148, 163, 184, 0.15);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
    }

    /* MYQER Logo */
    .myqer-logo {
      font-family: 'Inter', sans-serif;
      font-weight: 900;
      font-size: 2rem;
      letter-spacing: -0.05em;
      display: inline-flex;
      align-items: center;
    }

    .myqer-logo .myq {
      color: #000000;
    }

    .myqer-logo .er {
      color: #dc2626;
    }

    /* Ribbon System 🎀 */
    .ribbon {
      position: absolute;
      top: -8px;
      right: -8px;
      background: linear-gradient(135deg, #dc2626, #b91c1c);
      color: white;
      padding: 4px 12px;
      font-size: 0.75rem;
      font-weight: 700;
      border-radius: 0 8px 0 8px;
      box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
      z-index: 10;
      transform: rotate(0deg);
      animation: ribbonFloat 3s ease-in-out infinite;
    }

    .ribbon.green {
      background: linear-gradient(135deg, #16a34a, #15803d);
      box-shadow: 0 4px 12px rgba(22, 163, 74, 0.3);
    }

    .ribbon.blue {
      background: linear-gradient(135deg, #2563eb, #1d4ed8);
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
    }

    .ribbon.purple {
      background: linear-gradient(135deg, #7c3aed, #6d28d9);
      box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
    }

    .ribbon.orange {
      background: linear-gradient(135deg, #ea580c, #dc2626);
      box-shadow: 0 4px 12px rgba(234, 88, 12, 0.3);
    }

    .ribbon.yellow {
      background: linear-gradient(135deg, #eab308, #ca8a04);
      box-shadow: 0 4px 12px rgba(234, 179, 8, 0.3);
      color: #1f2937;
    }

    @keyframes ribbonFloat {
      0%, 100% { transform: rotate(0deg) translateY(0px); }
      50% { transform: rotate(1deg) translateY(-2px); }
    }

    /* Card Accents */
    .accent-green { border-left: 6px solid #16a34a; }
    .accent-red { border-left: 6px solid #dc2626; }
    .accent-blue { border-left: 6px solid #2563eb; }
    .accent-purple { border-left: 6px solid #7c3aed; }
    .accent-orange { border-left: 6px solid #ea580c; }
    .accent-yellow { border-left: 6px solid #eab308; }

    /* Asymmetrical Heights */
    .card-tall { min-height: 600px; }
    .card-medium { min-height: 400px; }
    .card-short { min-height: 300px; }
    .card-compact { min-height: 250px; }

    /* QR Container */
    .qr-container {
      background: white;
      border: 3px solid #dc2626;
      border-radius: 1rem;
      padding: 1rem;
      box-shadow: 0 8px 25px rgba(220, 38, 38, 0.15);
    }

    /* Language Dropdown */
    .language-dropdown {
      position: absolute;
      top: 100%;
      right: 0;
      margin-top: 0.5rem;
      background: white;
      border: 1px solid rgba(148, 163, 184, 0.2);
      border-radius: 0.75rem;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      z-index: 50;
      min-width: 200px;
      opacity: 0;
      visibility: hidden;
      transform: translateY(10px);
      transition: all 0.2s ease;
    }

    .language-dropdown.show {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .language-option {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem 1rem;
      font-weight: 500;
      color: #374151;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .language-option:hover {
      background: rgba(220, 38, 38, 0.05);
      color: #dc2626;
    }

    .language-option.active {
      background: rgba(220, 38, 38, 0.1);
      color: #dc2626;
      font-weight: 700;
    }

    /* Toast */
    .toast {
      position: fixed;
      top: 2rem;
      right: 2rem;
      padding: 1rem 1.5rem;
      border-radius: 0.75rem;
      color: white;
      font-weight: 600;
      z-index: 1000;
      transform: translateX(100%);
      transition: transform 0.3s ease;
      max-width: 300px;
    }

    .toast.show { transform: translateX(0); }
    .toast-success { background: #10b981; }
    .toast-warning { background: #f59e0b; }
    .toast-error { background: #dc2626; }

    /* Triage Status Pills */
    .triage-pill {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      border-radius: 9999px;
      font-weight: 700;
      font-size: 0.875rem;
    }

    .triage-green { background: #dcfce7; color: #166534; }
    .triage-yellow { background: #fef3c7; color: #92400e; }
    .triage-red { background: #fee2e2; color: #991b1b; }
    .triage-black { background: #f3f4f6; color: #1f2937; }

    /* RTL Support */
    .rtl {
      direction: rtl;
    }

    .rtl .language-dropdown {
      left: 0;
      right: auto;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .myqer-logo {
        font-size: 1.5rem;
      }
      
      .card-tall { min-height: 500px; }
      .card-medium { min-height: 350px; }
      .card-short { min-height: 250px; }
      .card-compact { min-height: 200px; }
    }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-100">

  <!-- Premium Header -->
  <header class="glass-card border-b border-slate-200/30 sticky top-0 z-40">
    <div class="max-w-7xl mx-auto px-6">
      <div class="flex items-center justify-between h-20">
        <div class="flex items-center gap-6">
          <div class="myqer-logo">
            <span class="myq">MYQ</span><span class="er">ER</span>
            <span class="text-xs text-slate-400 ml-1">™</span>
          </div>
          <div>
            <h1 class="text-2xl font-bold text-slate-800">🏥 <span data-translate="dashboard.title">Emergency Dashboard</span></h1>
            <p class="text-sm text-slate-500" data-translate="brand.tagline">pronounced "My Care" - v23.0</p>
          </div>
        </div>
        <div class="flex items-center gap-4">
          <!-- Language Selector -->
          <div class="relative">
            <button id="languageBtn" class="flex items-center gap-2 px-4 py-2 bg-white border border-slate-300 rounded-lg text-sm font-medium hover:bg-slate-50 transition-colors">
              <span id="currentFlag" class="text-lg">🇺🇸</span>
              <span id="currentLang" data-translate="language.english">English</span>
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div id="languageDropdown" class="language-dropdown">
              <div class="language-option active" data-lang="en">
                <span class="text-lg">🇺🇸</span>
                <span>English</span>
              </div>
              <div class="language-option" data-lang="es">
                <span class="text-lg">🇪🇸</span>
                <span>Español</span>
              </div>
              <div class="language-option" data-lang="fr">
                <span class="text-lg">🇫🇷</span>
                <span>Français</span>
              </div>
              <div class="language-option" data-lang="de">
                <span class="text-lg">🇩🇪</span>
                <span>Deutsch</span>
              </div>
              <div class="language-option" data-lang="it">
                <span class="text-lg">🇮🇹</span>
                <span>Italiano</span>
              </div>
              <div class="language-option" data-lang="pt">
                <span class="text-lg">🇵🇹</span>
                <span>Português</span>
              </div>
              <div class="language-option" data-lang="ro">
                <span class="text-lg">🇷🇴</span>
                <span>Română</span>
              </div>
              <div class="language-option" data-lang="ar">
                <span class="text-lg">🇸🇦</span>
                <span>العربية</span>
              </div>
              <div class="language-option" data-lang="hi">
                <span class="text-lg">🇮🇳</span>
                <span>हिन्दी</span>
              </div>
              <div class="language-option" data-lang="zh">
                <span class="text-lg">🇨🇳</span>
                <span>中文</span>
              </div>
            </div>
          </div>
          
          <!-- Logout Button -->
          <button id="logoutBtn" class="px-6 py-2 bg-slate-600 text-white rounded-lg text-sm font-bold hover:bg-slate-700 transition-colors">
            🚪 <span data-translate="auth.logout">LOGOUT</span>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Asymmetrical Vertical Dashboard -->
  <main class="pt-8 pb-16">
    <div class="max-w-7xl mx-auto px-6">
      <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
        
        <!-- Column 1: IDENTITY (Tall) -->
        <div class="lg:col-span-1">
          <section class="glass-card rounded-2xl p-8 accent-green card-tall relative">
            <div class="ribbon green">🎀 VERIFIED</div>
            
            <div class="mb-8">
              <h2 class="text-2xl font-bold text-slate-800 mb-3 flex items-center gap-3">
                👤 <span data-translate="cards.identity">IDENTITY</span>
              </h2>
              <p class="text-sm text-slate-500" data-translate="profile.description">These details help responders confirm who you are.</p>
            </div>

            <form id="profileForm" class="space-y-6">
              <div>
                <label class="block text-sm font-medium text-slate-700 mb-2" data-translate="profile.fullName">Full name</label>
                <input id="fullName" name="fullName" class="w-full px-4 py-3 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-green-500" placeholder="John Doe" value="Dr. Sarah Johnson" required>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-slate-700 mb-2" data-translate="profile.dateOfBirth">Date of Birth</label>
                <input id="dateOfBirth" name="dateOfBirth" type="date" class="w-full px-4 py-3 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-green-500" value="1985-03-15" required>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-slate-700 mb-2" data-translate="profile.country">Country</label>
                <select id="country" name="country" class="w-full px-4 py-3 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-green-500" required>
                  <option value="" data-translate="profile.selectCountry">Select country</option>
                  <option value="United States" selected>🇺🇸 United States</option>
                  <option value="Canada">🇨🇦 Canada</option>
                  <option value="United Kingdom">🇬🇧 United Kingdom</option>
                  <option value="Spain">🇪🇸 Spain</option>
                  <option value="France">🇫🇷 France</option>
                  <option value="Germany">🇩🇪 Germany</option>
                  <option value="Italy">🇮🇹 Italy</option>
                  <option value="Portugal">🇵🇹 Portugal</option>
                  <option value="Romania">🇷🇴 Romania</option>
                  <option value="Saudi Arabia">🇸🇦 Saudi Arabia</option>
                  <option value="India">🇮🇳 India</option>
                  <option value="China">🇨🇳 China</option>
                </select>
              </div>

              <div>
                <label class="block text-sm font-medium text-slate-700 mb-2" data-translate="profile.nationalId">National ID (optional)</label>
                <input id="nationalId" name="nationalId" class="w-full px-4 py-3 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-green-500" placeholder="123-45-6789">
              </div>

              <div class="pt-4">
                <button type="submit" class="w-full px-6 py-3 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition-colors" data-translate="common.save">
                  Save Identity
                </button>
              </div>
            </form>
          </section>
        </div>

        <!-- Column 2: CRITICAL (Tall) -->
        <div class="lg:col-span-1">
          <section class="glass-card rounded-2xl p-8 accent-red card-tall relative">
            <div class="ribbon">🎀 CRITICAL</div>
            
            <div class="mb-8">
              <h2 class="text-2xl font-bold text-slate-800 mb-3 flex items-center gap-3">
                🩺 <span data-translate="cards.critical">CRITICAL</span>
              </h2>
              <p class="text-sm text-slate-500" data-translate="health.description">Keep this current. It appears on your emergency card.</p>
            </div>

            <form id="healthForm" class="space-y-6">
              <div>
                <label class="block text-sm font-medium text-slate-700 mb-2" data-translate="health.bloodType">Blood type</label>
                <select id="bloodType" name="bloodType" class="w-full px-4 py-3 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-red-500 focus:border-red-500">
                  <option value="">—</option>
                  <option>A+</option><option selected>A-</option>
                  <option>B+</option><option>B-</option>
                  <option>AB+</option><option>AB-</option>
                  <option>O+</option><option>O-</option>
                </select>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-slate-700 mb-2" data-translate="health.organDonor">Organ donor</label>
                <select id="organDonor" name="organDonor" class="w-full px-4 py-3 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-red-500 focus:border-red-500">
                  <option value="">—</option>
                  <option value="yes" selected data-translate="common.yes">Yes</option>
                  <option value="no" data-translate="common.no">No</option>
                </select>
              </div>

              <div>
                <label class="block text-sm font-medium text-slate-700 mb-2" data-translate="health.allergies">Critical allergies</label>
                <textarea id="allergies" name="allergies" rows="3" class="w-full px-4 py-3 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-red-500 focus:border-red-500" placeholder="Penicillin, Nuts">Penicillin, Shellfish</textarea>
              </div>

              <div>
                <label class="block text-sm font-medium text-slate-700 mb-2" data-translate="health.conditions">Conditions</label>
                <textarea id="conditions" name="conditions" rows="3" class="w-full px-4 py-3 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-red-500 focus:border-red-500" placeholder="Diabetes, Asthma">Type 1 Diabetes, Hypertension</textarea>
              </div>

              <div>
                <label class="block text-sm font-medium text-slate-700 mb-2" data-translate="health.medications">Current medications</label>
                <textarea id="medications" name="medications" rows="3" class="w-full px-4 py-3 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-red-500 focus:border-red-500" placeholder="Metformin">Insulin, Lisinopril</textarea>
              </div>

              <div>
                <label class="block text-sm font-medium text-slate-700 mb-2" data-translate="health.lifeSupport">Life support preference</label>
                <select id="lifeSupport" name="lifeSupport" class="w-full px-4 py-3 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-red-500 focus:border-red-500">
                  <option value="">—</option>
                  <option value="full" data-translate="health.fullSupport">Full support</option>
                  <option value="limited" selected data-translate="health.limitedSupport">Limited support</option>
                  <option value="comfort" data-translate="health.comfortCare">Comfort care only</option>
                </select>
              </div>

              <div class="pt-4">
                <button type="submit" class="w-full px-6 py-3 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700 transition-colors" data-translate="common.save">
                  Save Critical Info
                </button>
              </div>
            </form>
          </section>
        </div>

        <!-- Column 3: ICE (Medium) -->
        <div class="lg:col-span-1">
          <section class="glass-card rounded-2xl p-8 accent-blue card-medium relative">
            <div class="ribbon blue">🎀 ICE</div>
            
            <div class="flex items-center justify-between mb-8">
              <div>
                <h2 class="text-2xl font-bold text-slate-800 mb-3 flex items-center gap-3">
                  📞 <span data-translate="cards.ice">ICE</span>
                </h2>
                <p class="text-sm text-slate-500" data-translate="contacts.description">Add up to 3 trusted contacts.</p>
              </div>
              <button id="addContactBtn" class="px-4 py-2 bg-slate-100 text-slate-700 rounded-lg text-sm font-medium hover:bg-slate-200 transition-colors" data-translate="contacts.add">Add contact</button>
            </div>
            
            <div id="contactsList" class="space-y-4">
              <div class="bg-slate-50 rounded-lg p-4">
                <div class="space-y-3">
                  <input class="w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Name" value="Michael Johnson" data-translate-placeholder="contacts.namePlaceholder">
                  <input class="w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Relationship" value="Spouse" data-translate-placeholder="contacts.relationshipPlaceholder">
                  <div class="flex gap-3">
                    <input class="flex-1 px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Phone" value="+1 (555) 123-4567" data-translate-placeholder="contacts.phonePlaceholder">
                    <button class="px-3 py-2 bg-slate-100 text-slate-600 rounded-lg text-sm hover:bg-red-50 hover:text-red-600 transition-colors" onclick="removeContact(this)">🗑</button>
                  </div>
                </div>
              </div>
              <div class="bg-slate-50 rounded-lg p-4">
                <div class="space-y-3">
                  <input class="w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Name" value="Dr. Emily Chen" data-translate-placeholder="contacts.namePlaceholder">
                  <input class="w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Relationship" value="Primary Doctor" data-translate-placeholder="contacts.relationshipPlaceholder">
                  <div class="flex gap-3">
                    <input class="flex-1 px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Phone" value="+1 (555) 987-6543" data-translate-placeholder="contacts.phonePlaceholder">
                    <button class="px-3 py-2 bg-slate-100 text-slate-600 rounded-lg text-sm hover:bg-red-50 hover:text-red-600 transition-colors" onclick="removeContact(this)">🗑</button>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>

        <!-- Column 4: VAULT, TRIAGE, QR, DELETE (Stacked) -->
        <div class="lg:col-span-1 space-y-8">
          
          <!-- VAULT Card (Short) -->
          <section class="glass-card rounded-2xl p-6 accent-purple card-short relative">
            <div class="ribbon purple">🎀 VAULT</div>
            
            <div class="text-center mb-6">
              <h3 class="text-xl font-bold text-slate-800 mb-2 flex items-center gap-2 justify-center">
                📁 <span data-translate="cards.vault">VAULT</span>
              </h3>
              <p class="text-sm text-slate-500" data-translate="vault.description">Secure storage for critical documents</p>
            </div>
            
            <div class="space-y-3">
              <div class="bg-slate-50 p-3 rounded-lg opacity-60 border-2 border-dashed border-slate-300" title="Coming soon">
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-3">
                    <div class="w-3 h-3 rounded-full bg-purple-500"></div>
                    <div>
                      <div class="text-sm font-semibold text-slate-600" data-translate="vault.dnr">DNR Orders</div>
                      <div class="text-xs text-slate-400" data-translate="common.comingSoon">Coming soon</div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="bg-slate-50 p-3 rounded-lg opacity-60 border-2 border-dashed border-slate-300" title="Coming soon">
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-3">
                    <div class="w-3 h-3 rounded-full bg-orange-500"></div>
                    <div>
                      <div class="text-sm font-semibold text-slate-600" data-translate="vault.insurance">Insurance Cards</div>
                      <div class="text-xs text-slate-400" data-translate="common.comingSoon">Coming soon</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- TRIAGE Card (Compact) -->
          <section class="glass-card rounded-2xl p-6 accent-orange card-compact relative">
            <div class="ribbon orange">🎀 AUTO</div>
            
            <div class="text-center mb-4">
              <h3 class="text-lg font-bold text-slate-800 mb-1">
                🚑 <span data-translate="cards.triage">TRIAGE</span>
              </h3>
              <p class="text-xs text-slate-500" data-translate="triage.description">Status computed automatically</p>
            </div>
            
            <div class="text-center mb-4">
              <div id="triageStatus" class="triage-pill triage-yellow">
                ⚠️ <span data-translate="triage.moderate">MODERATE</span>
              </div>
            </div>
            
            <div class="space-y-2 text-sm mb-4">
              <div class="flex justify-between">
                <span data-translate="triage.conditions">Conditions:</span>
                <span class="font-medium" id="conditionCount">2</span>
              </div>
              <div class="flex justify-between">
                <span data-translate="triage.medications">Medications:</span>
                <span class="font-medium" id="medicationCount">2</span>
              </div>
              <div class="flex justify-between">
                <span data-translate="triage.allergies">Allergies:</span>
                <span class="font-medium" id="allergyCount">2</span>
              </div>
            </div>
            
            <button id="speakTriage" class="w-full px-3 py-2 bg-slate-100 text-slate-700 rounded-lg text-sm font-medium hover:bg-slate-200">
              🔊 <span data-translate="triage.speak">Speak Status</span>
            </button>
          </section>

          <!-- QR Card (Compact) -->
          <section class="glass-card rounded-2xl p-6 accent-red card-compact relative">
            <div class="ribbon">🎀 LIVE</div>
            
            <div class="text-center mb-4">
              <h3 class="text-lg font-bold text-slate-800 mb-1">
                📱 <span data-translate="qr.title">Emergency Card</span>
              </h3>
              <p class="text-xs text-slate-500" data-translate="qr.description">Scan for emergency access</p>
            </div>
            
            <div class="text-center mb-4">
              <div id="qrContainer" class="qr-container inline-block">
                <canvas id="qrCanvas" width="120" height="120" style="display: block; border-radius: 8px;"></canvas>
              </div>
              <div class="mt-2">
                <code id="qrCode" class="text-xs font-mono font-bold text-slate-800">MYQER-CJ00FTX</code>
              </div>
            </div>
            
            <div class="grid grid-cols-2 gap-2 mb-3">
              <button id="exportPNG" class="px-2 py-1 bg-slate-100 text-slate-700 rounded text-xs font-medium hover:bg-slate-200">PNG</button>
              <button id="printQR" class="px-2 py-1 bg-slate-100 text-slate-700 rounded text-xs font-medium hover:bg-slate-200" data-translate="common.print">Print</button>
            </div>
            
            <button id="generateBtn" class="w-full px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700 transition-colors" data-translate="qr.generate">
              Generate QR Code
            </button>
          </section>

          <!-- Delete Account Card (Compact) -->
          <section class="glass-card rounded-2xl p-6 border-2 border-red-200 bg-red-50/50 accent-red card-compact relative">
            <div class="ribbon">🎀 DANGER</div>
            
            <div class="mb-4">
              <h3 class="text-lg font-bold text-red-700 mb-2 flex items-center gap-2">
                ⚠️ <span data-translate="account.deleteTitle">Delete Account</span>
              </h3>
              <p class="text-xs text-red-600" data-translate="account.deleteWarning">This action cannot be undone. All your data will be permanently deleted.</p>
            </div>

            <div class="space-y-3">
              <div>
                <label class="block text-sm font-medium text-red-700 mb-2" data-translate="account.confirmText">Type "DELETE MY ACCOUNT" to confirm:</label>
                <input id="deleteConfirmInput" class="w-full px-3 py-2 border border-red-300 rounded-lg text-sm focus:ring-2 focus:ring-red-500 focus:border-red-500" placeholder="DELETE MY ACCOUNT">
              </div>
              
              <button id="deleteAccountBtn" class="w-full px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed" disabled data-translate="account.deleteButton">
                Delete My Account
              </button>
            </div>
          </section>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer Disclaimers -->
  <footer class="bg-slate-100 border-t border-slate-200 py-12 mt-16">
    <div class="max-w-7xl mx-auto px-6">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-sm">
        <div>
          <h4 class="font-bold text-slate-800 mb-3" data-translate="footer.privacy">Privacy & Security</h4>
          <p class="text-slate-600" data-translate="footer.privacyText">Your medical data is encrypted and stored securely. Only you control access.</p>
        </div>
        <div>
          <h4 class="font-bold text-slate-800 mb-3" data-translate="footer.disclaimer">Medical Disclaimer</h4>
          <p class="text-slate-600" data-translate="footer.disclaimerText">This is informational only. Emergency responders must verify all medical information.</p>
        </div>
        <div>
          <h4 class="font-bold text-slate-800 mb-3" data-translate="footer.support">Support</h4>
          <p class="text-slate-600" data-translate="footer.supportText">Need help? Contact our support team 24/7 for assistance.</p>
        </div>
      </div>
      
      <div class="mt-8 pt-8 border-t border-slate-300 text-center">
        <div class="myqer-logo text-lg mb-2">
          <span class="myq">MYQ</span><span class="er">ER</span>
          <span class="text-xs text-slate-400 ml-1">™</span>
        </div>
        <p class="text-xs text-slate-500">© 2024 MYQER. All rights reserved. Emergency Medical Information System v23.0</p>
      </div>
    </div>
  </footer>

  <script>
    // Configuration
    const CONFIG = {
      version: '23.0',
      maxContacts: 3,
      supportedLanguages: ['en', 'es', 'fr', 'de', 'it', 'pt', 'ro', 'ar', 'hi', 'zh']
    };

    // Translation system - 10 languages
    const translations = {
      en: {
        'dashboard.title': 'Emergency Dashboard',
        'brand.tagline': 'pronounced "My Care" - v23.0',
        'cards.identity': 'IDENTITY',
        'cards.critical': 'CRITICAL',
        'cards.ice': 'ICE',
        'cards.vault': 'VAULT',
        'cards.triage': 'TRIAGE',
        'profile.description': 'These details help responders confirm who you are.',
        'profile.fullName': 'Full name',
        'profile.name': 'Name',
        'profile.dateOfBirth': 'Date of Birth',
        'profile.country': 'Country',
        'profile.selectCountry': 'Select country',
        'profile.nationalId': 'National ID (optional)',
        'health.description': 'Keep this current. It appears on your emergency card.',
        'health.bloodType': 'Blood type',
        'health.organDonor': 'Organ donor',
        'health.allergies': 'Critical allergies',
        'health.conditions': 'Conditions',
        'health.medications': 'Current medications',
        'health.lifeSupport': 'Life support preference',
        'health.fullSupport': 'Full support',
        'health.limitedSupport': 'Limited support',
        'health.comfortCare': 'Comfort care only',
        'contacts.description': 'Add up to 3 trusted contacts.',
        'contacts.add': 'Add contact',
        'contacts.ice': 'Emergency Contact',
        'contacts.namePlaceholder': 'Name',
        'contacts.relationshipPlaceholder': 'Relationship',
        'contacts.phonePlaceholder': 'Phone',
        'vault.description': 'Secure storage for critical documents',
        'vault.dnr': 'DNR Orders',
        'vault.insurance': 'Insurance Cards',
        'vault.livingWill': 'Living Will',
        'vault.medicalPower': 'Medical Power of Attorney',
        'triage.description': 'Status computed automatically',
        'triage.moderate': 'MODERATE',
        'triage.conditions': 'Conditions',
        'triage.medications': 'Medications',
        'triage.allergies': 'Allergies',
        'triage.override': 'Manual Override',
        'triage.useAuto': 'Use automatic',
        'triage.low': '🟢 LOW',
        'triage.high': '🔴 HIGH',
        'triage.critical': '⚫ CRITICAL',
        'triage.speak': 'Speak Status',
        'triage.female': 'Female',
        'account.deleteTitle': 'Delete Account',
        'account.deleteWarning': 'This action cannot be undone. All your data will be permanently deleted.',
        'account.confirmText': 'Type "DELETE MY ACCOUNT" to confirm:',
        'account.deleteButton': 'Delete My Account',
        'qr.title': 'Emergency Card',
        'qr.description': 'Scan for emergency access',
        'qr.contains': 'Contains medical essentials + online link',
        'qr.generate': 'Generate QR Code',
        'auth.logout': 'LOGOUT',
        'language.english': 'English',
        'footer.privacy': 'Privacy & Security',
        'footer.privacyText': 'Your medical data is encrypted and stored securely. Only you control access.',
        'footer.disclaimer': 'Medical Disclaimer',
        'footer.disclaimerText': 'This is informational only. Emergency responders must verify all medical information.',
        'footer.support': 'Support',
        'footer.supportText': 'Need help? Contact our support team 24/7 for assistance.',
        'common.save': 'Save',
        'common.print': 'Print',
        'common.close': 'Close',
        'common.yes': 'Yes',
        'common.no': 'No',
        'common.comingSoon': 'Coming soon'
      },
      es: {
        'dashboard.title': 'Panel de Emergencias',
        'brand.tagline': 'pronunciado "Mi Cuidado" - v23.0',
        'cards.identity': 'IDENTIDAD',
        'cards.critical': 'CRÍTICO',
        'cards.ice': 'ICE',
        'cards.vault': 'BÓVEDA',
        'cards.triage': 'TRIAJE',
        'profile.description': 'Estos detalles ayudan a los socorristas a confirmar quién eres.',
        'profile.fullName': 'Nombre completo',
        'profile.name': 'Nombre',
        'profile.dateOfBirth': 'Fecha de nacimiento',
        'profile.country': 'País',
        'profile.selectCountry': 'Seleccionar país',
        'profile.nationalId': 'ID Nacional (opcional)',
        'health.description': 'Mantén esto actualizado. Aparece en tu tarjeta de emergencia.',
        'health.bloodType': 'Tipo de sangre',
        'health.organDonor': 'Donante de órganos',
        'health.allergies': 'Alergias críticas',
        'health.conditions': 'Condiciones',
        'health.medications': 'Medicamentos actuales',
        'health.lifeSupport': 'Preferencia de soporte vital',
        'health.fullSupport': 'Soporte completo',
        'health.limitedSupport': 'Soporte limitado',
        'health.comfortCare': 'Solo cuidados paliativos',
        'contacts.description': 'Agrega hasta 3 contactos de confianza.',
        'contacts.add': 'Agregar contacto',
        'contacts.ice': 'Contacto de Emergencia',
        'contacts.namePlaceholder': 'Nombre',
        'contacts.relationshipPlaceholder': 'Relación',
        'contacts.phonePlaceholder': 'Teléfono',
        'vault.description': 'Almacenamiento seguro para documentos críticos',
        'vault.dnr': 'Órdenes DNR',
        'vault.insurance': 'Tarjetas de Seguro',
        'vault.livingWill': 'Testamento Vital',
        'vault.medicalPower': 'Poder Médico',
        'triage.description': 'Estado calculado automáticamente',
        'triage.moderate': 'MODERADO',
        'triage.conditions': 'Condiciones',
        'triage.medications': 'Medicamentos',
        'triage.allergies': 'Alergias',
        'triage.override': 'Anulación Manual',
        'triage.useAuto': 'Usar automático',
        'triage.low': '🟢 BAJO',
        'triage.high': '🔴 ALTO',
        'triage.critical': '⚫ CRÍTICO',
        'triage.speak': 'Hablar Estado',
        'triage.female': 'Femenino',
        'account.deleteTitle': 'Eliminar Cuenta',
        'account.deleteWarning': 'Esta acción no se puede deshacer. Todos tus datos serán eliminados permanentemente.',
        'account.confirmText': 'Escribe "DELETE MY ACCOUNT" para confirmar:',
        'account.deleteButton': 'Eliminar Mi Cuenta',
        'qr.title': 'Tarjeta de Emergencia',
        'qr.description': 'Escanear para acceso de emergencia',
        'qr.contains': 'Contiene elementos médicos esenciales + enlace en línea',
        'qr.generate': 'Generar Código QR',
        'auth.logout': 'CERRAR SESIÓN',
        'language.english': 'Inglés',
        'footer.privacy': 'Privacidad y Seguridad',
        'footer.privacyText': 'Tus datos médicos están encriptados y almacenados de forma segura. Solo tú controlas el acceso.',
        'footer.disclaimer': 'Descargo Médico',
        'footer.disclaimerText': 'Esto es solo informativo. Los socorristas deben verificar toda la información médica.',
        'footer.support': 'Soporte',
        'footer.supportText': '¿Necesitas ayuda? Contacta a nuestro equipo de soporte 24/7 para asistencia.',
        'common.save': 'Guardar',
        'common.print': 'Imprimir',
        'common.close': 'Cerrar',
        'common.yes': 'Sí',
        'common.no': 'No',
        'common.comingSoon': 'Próximamente'
      },
      fr: {
        'dashboard.title': 'Tableau de Bord d\'Urgence',
        'brand.tagline': 'prononcé "Mes Soins" - v23.0',
        'cards.identity': 'IDENTITÉ',
        'cards.critical': 'CRITIQUE',
        'cards.ice': 'ICE',
        'cards.vault': 'COFFRE',
        'cards.triage': 'TRIAGE',
        'profile.description': 'Ces détails aident les secouristes à confirmer qui vous êtes.',
        'profile.fullName': 'Nom complet',
        'profile.name': 'Nom',
        'profile.dateOfBirth': 'Date de naissance',
        'profile.country': 'Pays',
        'profile.selectCountry': 'Sélectionner le pays',
        'profile.nationalId': 'ID National (optionnel)',
        'health.description': 'Gardez ceci à jour. Il apparaît sur votre carte d\'urgence.',
        'health.bloodType': 'Groupe sanguin',
        'health.organDonor': 'Donneur d\'organes',
        'health.allergies': 'Allergies critiques',
        'health.conditions': 'Conditions',
        'health.medications': 'Médicaments actuels',
        'health.lifeSupport': 'Préférence de support vital',
        'health.fullSupport': 'Support complet',
        'health.limitedSupport': 'Support limité',
        'health.comfortCare': 'Soins de confort uniquement',
        'contacts.description': 'Ajoutez jusqu\'à 3 contacts de confiance.',
        'contacts.add': 'Ajouter un contact',
        'contacts.ice': 'Contact d\'Urgence',
        'contacts.namePlaceholder': 'Nom',
        'contacts.relationshipPlaceholder': 'Relation',
        'contacts.phonePlaceholder': 'Téléphone',
        'vault.description': 'Stockage sécurisé pour les documents critiques',
        'vault.dnr': 'Ordres DNR',
        'vault.insurance': 'Cartes d\'Assurance',
        'vault.livingWill': 'Testament de Vie',
        'vault.medicalPower': 'Procuration Médicale',
        'triage.description': 'Statut calculé automatiquement',
        'triage.moderate': 'MODÉRÉ',
        'triage.conditions': 'Conditions',
        'triage.medications': 'Médicaments',
        'triage.allergies': 'Allergies',
        'triage.override': 'Remplacement Manuel',
        'triage.useAuto': 'Utiliser automatique',
        'triage.low': '🟢 BAS',
        'triage.high': '🔴 ÉLEVÉ',
        'triage.critical': '⚫ CRITIQUE',
        'triage.speak': 'Parler Statut',
        'triage.female': 'Féminin',
        'account.deleteTitle': 'Supprimer le Compte',
        'account.deleteWarning': 'Cette action ne peut pas être annulée. Toutes vos données seront définitivement supprimées.',
        'account.confirmText': 'Tapez "DELETE MY ACCOUNT" pour confirmer:',
        'account.deleteButton': 'Supprimer Mon Compte',
        'qr.title': 'Carte d\'Urgence',
        'qr.description': 'Scanner pour l\'accès d\'urgence',
        'qr.contains': 'Contient les éléments médicaux essentiels + lien en ligne',
        'qr.generate': 'Générer le Code QR',
        'auth.logout': 'DÉCONNEXION',
        'language.english': 'Anglais',
        'footer.privacy': 'Confidentialité et Sécurité',
        'footer.privacyText': 'Vos données médicales sont cryptées et stockées en sécurité. Vous seul contrôlez l\'accès.',
        'footer.disclaimer': 'Avertissement Médical',
        'footer.disclaimerText': 'Ceci est informatif seulement. Les secouristes doivent vérifier toutes les informations médicales.',
        'footer.support': 'Support',
        'footer.supportText': 'Besoin d\'aide? Contactez notre équipe de support 24/7 pour assistance.',
        'common.save': 'Sauvegarder',
        'common.print': 'Imprimer',
        'common.close': 'Fermer',
        'common.yes': 'Oui',
        'common.no': 'Non',
        'common.comingSoon': 'Bientôt disponible'
      },
      de: {
        'dashboard.title': 'Notfall-Dashboard',
        'brand.tagline': 'ausgesprochen "Meine Pflege" - v23.0',
        'cards.identity': 'IDENTITÄT',
        'cards.critical': 'KRITISCH',
        'cards.ice': 'ICE',
        'cards.vault': 'TRESOR',
        'cards.triage': 'TRIAGE',
        'profile.description': 'Diese Details helfen Rettungskräften zu bestätigen, wer Sie sind.',
        'profile.fullName': 'Vollständiger Name',
        'profile.name': 'Name',
        'profile.dateOfBirth': 'Geburtsdatum',
        'profile.country': 'Land',
        'profile.selectCountry': 'Land auswählen',
        'profile.nationalId': 'Nationale ID (optional)',
        'health.description': 'Halten Sie dies aktuell. Es erscheint auf Ihrer Notfallkarte.',
        'health.bloodType': 'Blutgruppe',
        'health.organDonor': 'Organspender',
        'health.allergies': 'Kritische Allergien',
        'health.conditions': 'Bedingungen',
        'health.medications': 'Aktuelle Medikamente',
        'health.lifeSupport': 'Lebenserhaltungspräferenz',
        'health.fullSupport': 'Vollständige Unterstützung',
        'health.limitedSupport': 'Begrenzte Unterstützung',
        'health.comfortCare': 'Nur Komfortpflege',
        'contacts.description': 'Fügen Sie bis zu 3 vertrauenswürdige Kontakte hinzu.',
        'contacts.add': 'Kontakt hinzufügen',
        'contacts.ice': 'Notfallkontakt',
        'contacts.namePlaceholder': 'Name',
        'contacts.relationshipPlaceholder': 'Beziehung',
        'contacts.phonePlaceholder': 'Telefon',
        'vault.description': 'Sichere Speicherung für kritische Dokumente',
        'vault.dnr': 'DNR-Anordnungen',
        'vault.insurance': 'Versicherungskarten',
        'vault.livingWill': 'Patientenverfügung',
        'vault.medicalPower': 'Medizinische Vollmacht',
        'triage.description': 'Status automatisch berechnet',
        'triage.moderate': 'MÄSSIG',
        'triage.conditions': 'Bedingungen',
        'triage.medications': 'Medikamente',
        'triage.allergies': 'Allergien',
        'triage.override': 'Manuelle Überschreibung',
        'triage.useAuto': 'Automatisch verwenden',
        'triage.low': '🟢 NIEDRIG',
        'triage.high': '🔴 HOCH',
        'triage.critical': '⚫ KRITISCH',
        'triage.speak': 'Status Sprechen',
        'triage.female': 'Weiblich',
        'account.deleteTitle': 'Konto Löschen',
        'account.deleteWarning': 'Diese Aktion kann nicht rückgängig gemacht werden. Alle Ihre Daten werden dauerhaft gelöscht.',
        'account.confirmText': 'Geben Sie "DELETE MY ACCOUNT" ein, um zu bestätigen:',
        'account.deleteButton': 'Mein Konto Löschen',
        'qr.title': 'Notfallkarte',
        'qr.description': 'Scannen für Notfallzugang',
        'qr.contains': 'Enthält medizinische Grundlagen + Online-Link',
        'qr.generate': 'QR-Code Generieren',
        'auth.logout': 'ABMELDEN',
        'language.english': 'Englisch',
        'footer.privacy': 'Datenschutz & Sicherheit',
        'footer.privacyText': 'Ihre medizinischen Daten sind verschlüsselt und sicher gespeichert. Nur Sie kontrollieren den Zugang.',
        'footer.disclaimer': 'Medizinischer Haftungsausschluss',
        'footer.disclaimerText': 'Dies ist nur informativ. Rettungskräfte müssen alle medizinischen Informationen überprüfen.',
        'footer.support': 'Support',
        'footer.supportText': 'Brauchen Sie Hilfe? Kontaktieren Sie unser Support-Team 24/7 für Unterstützung.',
        'common.save': 'Speichern',
        'common.print': 'Drucken',
        'common.close': 'Schließen',
        'common.yes': 'Ja',
        'common.no': 'Nein',
        'common.comingSoon': 'Demnächst verfügbar'
      },
      it: {
        'dashboard.title': 'Dashboard di Emergenza',
        'brand.tagline': 'pronunciato "Le Mie Cure" - v23.0',
        'cards.identity': 'IDENTITÀ',
        'cards.critical': 'CRITICO',
        'cards.ice': 'ICE',
        'cards.vault': 'CASSAFORTE',
        'cards.triage': 'TRIAGE',
        'profile.description': 'Questi dettagli aiutano i soccorritori a confermare chi sei.',
        'profile.fullName': 'Nome completo',
        'profile.name': 'Nome',
        'profile.dateOfBirth': 'Data di nascita',
        'profile.country': 'Paese',
        'profile.selectCountry': 'Seleziona paese',
        'profile.nationalId': 'ID Nazionale (opzionale)',
        'health.description': 'Mantieni questo aggiornato. Appare sulla tua carta di emergenza.',
        'health.bloodType': 'Gruppo sanguigno',
        'health.organDonor': 'Donatore di organi',
        'health.allergies': 'Allergie critiche',
        'health.conditions': 'Condizioni',
        'health.medications': 'Farmaci attuali',
        'health.lifeSupport': 'Preferenza supporto vitale',
        'health.fullSupport': 'Supporto completo',
        'health.limitedSupport': 'Supporto limitato',
        'health.comfortCare': 'Solo cure palliative',
        'contacts.description': 'Aggiungi fino a 3 contatti fidati.',
        'contacts.add': 'Aggiungi contatto',
        'contacts.ice': 'Contatto di Emergenza',
        'contacts.namePlaceholder': 'Nome',
        'contacts.relationshipPlaceholder': 'Relazione',
        'contacts.phonePlaceholder': 'Telefono',
        'vault.description': 'Archiviazione sicura per documenti critici',
        'vault.dnr': 'Ordini DNR',
        'vault.insurance': 'Carte Assicurative',
        'vault.livingWill': 'Testamento Biologico',
        'vault.medicalPower': 'Procura Medica',
        'triage.description': 'Stato calcolato automaticamente',
        'triage.moderate': 'MODERATO',
        'triage.conditions': 'Condizioni',
        'triage.medications': 'Farmaci',
        'triage.allergies': 'Allergie',
        'triage.override': 'Sostituzione Manuale',
        'triage.useAuto': 'Usa automatico',
        'triage.low': '🟢 BASSO',
        'triage.high': '🔴 ALTO',
        'triage.critical': '⚫ CRITICO',
        'triage.speak': 'Parla Stato',
        'triage.female': 'Femminile',
        'account.deleteTitle': 'Elimina Account',
        'account.deleteWarning': 'Questa azione non può essere annullata. Tutti i tuoi dati saranno eliminati permanentemente.',
        'account.confirmText': 'Digita "DELETE MY ACCOUNT" per confermare:',
        'account.deleteButton': 'Elimina Il Mio Account',
        'qr.title': 'Carta di Emergenza',
        'qr.description': 'Scansiona per accesso di emergenza',
        'qr.contains': 'Contiene elementi medici essenziali + link online',
        'qr.generate': 'Genera Codice QR',
        'auth.logout': 'DISCONNETTI',
        'language.english': 'Inglese',
        'footer.privacy': 'Privacy e Sicurezza',
        'footer.privacyText': 'I tuoi dati medici sono crittografati e archiviati in sicurezza. Solo tu controlli l\'accesso.',
        'footer.disclaimer': 'Disclaimer Medico',
        'footer.disclaimerText': 'Questo è solo informativo. I soccorritori devono verificare tutte le informazioni mediche.',
        'footer.support': 'Supporto',
        'footer.supportText': 'Hai bisogno di aiuto? Contatta il nostro team di supporto 24/7 per assistenza.',
        'common.save': 'Salva',
        'common.print': 'Stampa',
        'common.close': 'Chiudi',
        'common.yes': 'Sì',
        'common.no': 'No',
        'common.comingSoon': 'Prossimamente'
      },
      pt: {
        'dashboard.title': 'Painel de Emergência',
        'brand.tagline': 'pronunciado "Meu Cuidado" - v23.0',
        'cards.identity': 'IDENTIDADE',
        'cards.critical': 'CRÍTICO',
        'cards.ice': 'ICE',
        'cards.vault': 'COFRE',
        'cards.triage': 'TRIAGEM',
        'profile.description': 'Estes detalhes ajudam os socorristas a confirmar quem você é.',
        'profile.fullName': 'Nome completo',
        'profile.name': 'Nome',
        'profile.dateOfBirth': 'Data de nascimento',
        'profile.country': 'País',
        'profile.selectCountry': 'Selecionar país',
        'profile.nationalId': 'ID Nacional (opcional)',
        'health.description': 'Mantenha isso atualizado. Aparece no seu cartão de emergência.',
        'health.bloodType': 'Tipo sanguíneo',
        'health.organDonor': 'Doador de órgãos',
        'health.allergies': 'Alergias críticas',
        'health.conditions': 'Condições',
        'health.medications': 'Medicamentos atuais',
        'health.lifeSupport': 'Preferência de suporte vital',
        'health.fullSupport': 'Suporte completo',
        'health.limitedSupport': 'Suporte limitado',
        'health.comfortCare': 'Apenas cuidados paliativos',
        'contacts.description': 'Adicione até 3 contatos confiáveis.',
        'contacts.add': 'Adicionar contato',
        'contacts.ice': 'Contato de Emergência',
        'contacts.namePlaceholder': 'Nome',
        'contacts.relationshipPlaceholder': 'Relacionamento',
        'contacts.phonePlaceholder': 'Telefone',
        'vault.description': 'Armazenamento seguro para documentos críticos',
        'vault.dnr': 'Ordens DNR',
        'vault.insurance': 'Cartões de Seguro',
        'vault.livingWill': 'Testamento Vital',
        'vault.medicalPower': 'Procuração Médica',
        'triage.description': 'Status calculado automaticamente',
        'triage.moderate': 'MODERADO',
        'triage.conditions': 'Condições',
        'triage.medications': 'Medicamentos',
        'triage.allergies': 'Alergias',
        'triage.override': 'Substituição Manual',
        'triage.useAuto': 'Usar automático',
        'triage.low': '🟢 BAIXO',
        'triage.high': '🔴 ALTO',
        'triage.critical': '⚫ CRÍTICO',
        'triage.speak': 'Falar Status',
        'triage.female': 'Feminino',
        'account.deleteTitle': 'Excluir Conta',
        'account.deleteWarning': 'Esta ação não pode ser desfeita. Todos os seus dados serão excluídos permanentemente.',
        'account.confirmText': 'Digite "DELETE MY ACCOUNT" para confirmar:',
        'account.deleteButton': 'Excluir Minha Conta',
        'qr.title': 'Cartão de Emergência',
        'qr.description': 'Escaneie para acesso de emergência',
        'qr.contains': 'Contém elementos médicos essenciais + link online',
        'qr.generate': 'Gerar Código QR',
        'auth.logout': 'SAIR',
        'language.english': 'Inglês',
        'footer.privacy': 'Privacidade e Segurança',
        'footer.privacyText': 'Seus dados médicos são criptografados e armazenados com segurança. Apenas você controla o acesso.',
        'footer.disclaimer': 'Isenção Médica',
        'footer.disclaimerText': 'Isto é apenas informativo. Socorristas devem verificar todas as informações médicas.',
        'footer.support': 'Suporte',
        'footer.supportText': 'Precisa de ajuda? Entre em contato com nossa equipe de suporte 24/7 para assistência.',
        'common.save': 'Salvar',
        'common.print': 'Imprimir',
        'common.close': 'Fechar',
        'common.yes': 'Sim',
        'common.no': 'Não',
        'common.comingSoon': 'Em breve'
      },
      ro: {
        'dashboard.title': 'Tablou de Bord Urgențe',
        'brand.tagline': 'pronunțat "Grija Mea" - v23.0',
        'cards.identity': 'IDENTITATE',
        'cards.critical': 'CRITIC',
        'cards.ice': 'ICE',
        'cards.vault': 'SEIF',
        'cards.triage': 'TRIAJ',
        'profile.description': 'Aceste detalii îi ajută pe salvatori să confirme cine ești.',
        'profile.fullName': 'Nume complet',
        'profile.name': 'Nume',
        'profile.dateOfBirth': 'Data nașterii',
        'profile.country': 'Țara',
        'profile.selectCountry': 'Selectează țara',
        'profile.nationalId': 'ID Național (opțional)',
        'health.description': 'Păstrează acestea actualizate. Apar pe cardul tău de urgență.',
        'health.bloodType': 'Grupa sanguină',
        'health.organDonor': 'Donator de organe',
        'health.allergies': 'Alergii critice',
        'health.conditions': 'Condiții',
        'health.medications': 'Medicamente actuale',
        'health.lifeSupport': 'Preferința pentru suportul vital',
        'health.fullSupport': 'Suport complet',
        'health.limitedSupport': 'Suport limitat',
        'health.comfortCare': 'Doar îngrijire paliativă',
        'contacts.description': 'Adaugă până la 3 contacte de încredere.',
        'contacts.add': 'Adaugă contact',
        'contacts.ice': 'Contact de Urgență',
        'contacts.namePlaceholder': 'Nume',
        'contacts.relationshipPlaceholder': 'Relația',
        'contacts.phonePlaceholder': 'Telefon',
        'vault.description': 'Stocare sigură pentru documente critice',
        'vault.dnr': 'Ordine DNR',
        'vault.insurance': 'Carduri de Asigurare',
        'vault.livingWill': 'Testament de Viață',
        'vault.medicalPower': 'Procură Medicală',
        'triage.description': 'Status calculat automat',
        'triage.moderate': 'MODERAT',
        'triage.conditions': 'Condiții',
        'triage.medications': 'Medicamente',
        'triage.allergies': 'Alergii',
        'triage.override': 'Înlocuire Manuală',
        'triage.useAuto': 'Folosește automat',
        'triage.low': '🟢 SCĂZUT',
        'triage.high': '🔴 RIDICAT',
        'triage.critical': '⚫ CRITIC',
        'triage.speak': 'Vorbește Status',
        'triage.female': 'Feminin',
        'account.deleteTitle': 'Șterge Contul',
        'account.deleteWarning': 'Această acțiune nu poate fi anulată. Toate datele tale vor fi șterse permanent.',
        'account.confirmText': 'Tastează "DELETE MY ACCOUNT" pentru a confirma:',
        'account.deleteButton': 'Șterge Contul Meu',
        'qr.title': 'Card de Urgență',
        'qr.description': 'Scanează pentru acces de urgență',
        'qr.contains': 'Conține elemente medicale esențiale + link online',
        'qr.generate': 'Generează Cod QR',
        'auth.logout': 'DECONECTARE',
        'language.english': 'Engleză',
        'footer.privacy': 'Confidențialitate și Securitate',
        'footer.privacyText': 'Datele tale medicale sunt criptate și stocate în siguranță. Doar tu controlezi accesul.',
        'footer.disclaimer': 'Disclaimer Medical',
        'footer.disclaimerText': 'Aceasta este doar informativă. Salvatorii trebuie să verifice toate informațiile medicale.',
        'footer.support': 'Suport',
        'footer.supportText': 'Ai nevoie de ajutor? Contactează echipa noastră de suport 24/7 pentru asistență.',
        'common.save': 'Salvează',
        'common.print': 'Printează',
        'common.close': 'Închide',
        'common.yes': 'Da',
        'common.no': 'Nu',
        'common.comingSoon': 'În curând'
      },
      ar: {
        'dashboard.title': 'لوحة الطوارئ',
        'brand.tagline': 'يُنطق "رعايتي" - v23.0',
        'cards.identity': 'الهوية',
        'cards.critical': 'حرج',
        'cards.ice': 'ICE',
        'cards.vault': 'الخزنة',
        'cards.triage': 'الفرز',
        'profile.description': 'تساعد هذه التفاصيل المسعفين على تأكيد هويتك.',
        'profile.fullName': 'الاسم الكامل',
        'profile.name': 'الاسم',
        'profile.dateOfBirth': 'تاريخ الميلاد',
        'profile.country': 'البلد',
        'profile.selectCountry': 'اختر البلد',
        'profile.nationalId': 'الهوية الوطنية (اختياري)',
        'health.description': 'حافظ على تحديث هذه المعلومات. تظهر في بطاقة الطوارئ الخاصة بك.',
        'health.bloodType': 'فصيلة الدم',
        'health.organDonor': 'متبرع بالأعضاء',
        'health.allergies': 'الحساسيات الحرجة',
        'health.conditions': 'الحالات',
        'health.medications': 'الأدوية الحالية',
        'health.lifeSupport': 'تفضيل دعم الحياة',
        'health.fullSupport': 'دعم كامل',
        'health.limitedSupport': 'دعم محدود',
        'health.comfortCare': 'رعاية مريحة فقط',
        'contacts.description': 'أضف حتى 3 جهات اتصال موثوقة.',
        'contacts.add': 'إضافة جهة اتصال',
        'contacts.ice': 'جهة اتصال الطوارئ',
        'contacts.namePlaceholder': 'الاسم',
        'contacts.relationshipPlaceholder': 'العلاقة',
        'contacts.phonePlaceholder': 'الهاتف',
        'vault.description': 'تخزين آمن للمستندات الحرجة',
        'vault.dnr': 'أوامر DNR',
        'vault.insurance': 'بطاقات التأمين',
        'vault.livingWill': 'وصية الحياة',
        'vault.medicalPower': 'توكيل طبي',
        'triage.description': 'الحالة محسوبة تلقائياً',
        'triage.moderate': 'متوسط',
        'triage.conditions': 'الحالات',
        'triage.medications': 'الأدوية',
        'triage.allergies': 'الحساسيات',
        'triage.override': 'تجاوز يدوي',
        'triage.useAuto': 'استخدم التلقائي',
        'triage.low': '🟢 منخفض',
        'triage.high': '🔴 عالي',
        'triage.critical': '⚫ حرج',
        'triage.speak': 'تحدث بالحالة',
        'triage.female': 'أنثى',
        'account.deleteTitle': 'حذف الحساب',
        'account.deleteWarning': 'لا يمكن التراجع عن هذا الإجراء. سيتم حذف جميع بياناتك نهائياً.',
        'account.confirmText': 'اكتب "DELETE MY ACCOUNT" للتأكيد:',
        'account.deleteButton': 'حذف حسابي',
        'qr.title': 'بطاقة الطوارئ',
        'qr.description': 'امسح للوصول للطوارئ',
        'qr.contains': 'يحتوي على الأساسيات الطبية + رابط عبر الإنترنت',
        'qr.generate': 'إنشاء رمز QR',
        'auth.logout': 'تسجيل الخروج',
        'language.english': 'الإنجليزية',
        'footer.privacy': 'الخصوصية والأمان',
        'footer.privacyText': 'بياناتك الطبية مشفرة ومحفوظة بأمان. أنت فقط تتحكم في الوصول.',
        'footer.disclaimer': 'إخلاء مسؤولية طبية',
        'footer.disclaimerText': 'هذا للمعلومات فقط. يجب على المسعفين التحقق من جميع المعلومات الطبية.',
        'footer.support': 'الدعم',
        'footer.supportText': 'تحتاج مساعدة؟ اتصل بفريق الدعم لدينا 24/7 للمساعدة.',
        'common.save': 'حفظ',
        'common.print': 'طباعة',
        'common.close': 'إغلاق',
        'common.yes': 'نعم',
        'common.no': 'لا',
        'common.comingSoon': 'قريباً'
      },
      hi: {
        'dashboard.title': 'आपातकालीन डैशबोर्ड',
        'brand.tagline': 'उच्चारण "मेरी देखभाल" - v23.0',
        'cards.identity': 'पहचान',
        'cards.critical': 'गंभीर',
        'cards.ice': 'ICE',
        'cards.vault': 'तिजोरी',
        'cards.triage': 'ट्राइएज',
        'profile.description': 'ये विवरण बचावकर्ताओं को आपकी पहचान की पुष्टि करने में मदद करते हैं।',
        'profile.fullName': 'पूरा नाम',
        'profile.name': 'नाम',
        'profile.dateOfBirth': 'जन्म तिथि',
        'profile.country': 'देश',
        'profile.selectCountry': 'देश चुनें',
        'profile.nationalId': 'राष्ट्रीय आईडी (वैकल्पिक)',
        'health.description': 'इसे अद्यतन रखें। यह आपके आपातकालीन कार्ड पर दिखाई देता है।',
        'health.bloodType': 'रक्त समूह',
        'health.organDonor': 'अंग दाता',
        'health.allergies': 'गंभीर एलर्जी',
        'health.conditions': 'स्थितियां',
        'health.medications': 'वर्तमान दवाएं',
        'health.lifeSupport': 'जीवन समर्थन प्राथमिकता',
        'health.fullSupport': 'पूर्ण समर्थन',
        'health.limitedSupport': 'सीमित समर्थन',
        'health.comfortCare': 'केवल आराम की देखभाल',
        'contacts.description': '3 विश्वसनीय संपर्क तक जोड़ें।',
        'contacts.add': 'संपर्क जोड़ें',
        'contacts.ice': 'आपातकालीन संपर्क',
        'contacts.namePlaceholder': 'नाम',
        'contacts.relationshipPlaceholder': 'रिश्ता',
        'contacts.phonePlaceholder': 'फोन',
        'vault.description': 'महत्वपूर्ण दस्तावेजों के लिए सुरक्षित भंडारण',
        'vault.dnr': 'DNR आदेश',
        'vault.insurance': 'बीमा कार्ड',
        'vault.livingWill': 'जीवन वसीयत',
        'vault.medicalPower': 'चिकित्सा शक्ति',
        'triage.description': 'स्थिति स्वचालित रूप से गणना की गई',
        'triage.moderate': 'मध्यम',
        'triage.conditions': 'स्थितियां',
        'triage.medications': 'दवाएं',
        'triage.allergies': 'एलर्जी',
        'triage.override': 'मैनुअल ओवरराइड',
        'triage.useAuto': 'स्वचालित का उपयोग करें',
        'triage.low': '🟢 कम',
        'triage.high': '🔴 उच्च',
        'triage.critical': '⚫ गंभीर',
        'triage.speak': 'स्थिति बोलें',
        'triage.female': 'महिला',
        'account.deleteTitle': 'खाता हटाएं',
        'account.deleteWarning': 'यह क्रिया पूर्ववत नहीं की जा सकती। आपका सारा डेटा स्थायी रूप से हटा दिया जाएगा।',
        'account.confirmText': 'पुष्टि के लिए "DELETE MY ACCOUNT" टाइप करें:',
        'account.deleteButton': 'मेरा खाता हटाएं',
        'qr.title': 'आपातकालीन कार्ड',
        'qr.description': 'आपातकालीन पहुंच के लिए स्कैन करें',
        'qr.contains': 'चिकित्सा आवश्यकताएं + ऑनलाइन लिंक शामिल है',
        'qr.generate': 'QR कोड जेनरेट करें',
        'auth.logout': 'लॉग आउट',
        'language.english': 'अंग्रेजी',
        'footer.privacy': 'गोपनीयता और सुरक्षा',
        'footer.privacyText': 'आपका चिकित्सा डेटा एन्क्रिप्टेड और सुरक्षित रूप से संग्रहीत है। केवल आप पहुंच को नियंत्रित करते हैं।',
        'footer.disclaimer': 'चिकित्सा अस्वीकरण',
        'footer.disclaimerText': 'यह केवल सूचनात्मक है। आपातकालीन उत्तरदाताओं को सभी चिकित्सा जानकारी सत्यापित करनी चाहिए।',
        'footer.support': 'सहायता',
        'footer.supportText': 'मदद चाहिए? सहायता के लिए हमारी सहायता टीम से 24/7 संपर्क करें।',
        'common.save': 'सेव करें',
        'common.print': 'प्रिंट करें',
        'common.close': 'बंद करें',
        'common.yes': 'हां',
        'common.no': 'नहीं',
        'common.comingSoon': 'जल्द आ रहा है'
      },
      zh: {
        'dashboard.title': '紧急仪表板',
        'brand.tagline': '发音为"我的护理" - v23.0',
        'cards.identity': '身份',
        'cards.critical': '关键',
        'cards.ice': 'ICE',
        'cards.vault': '保险库',
        'cards.triage': '分诊',
        'profile.description': '这些详细信息帮助救援人员确认您的身份。',
        'profile.fullName': '全名',
        'profile.name': '姓名',
        'profile.dateOfBirth': '出生日期',
        'profile.country': '国家',
        'profile.selectCountry': '选择国家',
        'profile.nationalId': '国民身份证（可选）',
        'health.description': '保持更新。这会出现在您的紧急卡上。',
        'health.bloodType': '血型',
        'health.organDonor': '器官捐献者',
        'health.allergies': '严重过敏',
        'health.conditions': '病症',
        'health.medications': '当前药物',
        'health.lifeSupport': '生命支持偏好',
        'health.fullSupport': '完全支持',
        'health.limitedSupport': '有限支持',
        'health.comfortCare': '仅舒适护理',
        'contacts.description': '添加最多3个可信联系人。',
        'contacts.add': '添加联系人',
        'contacts.ice': '紧急联系人',
        'contacts.namePlaceholder': '姓名',
        'contacts.relationshipPlaceholder': '关系',
        'contacts.phonePlaceholder': '电话',
        'vault.description': '关键文档的安全存储',
        'vault.dnr': 'DNR命令',
        'vault.insurance': '保险卡',
        'vault.livingWill': '生前遗嘱',
        'vault.medicalPower': '医疗授权书',
        'triage.description': '状态自动计算',
        'triage.moderate': '中等',
        'triage.conditions': '病症',
        'triage.medications': '药物',
        'triage.allergies': '过敏',
        'triage.override': '手动覆盖',
        'triage.useAuto': '使用自动',
        'triage.low': '🟢 低',
        'triage.high': '🔴 高',
        'triage.critical': '⚫ 危急',
        'triage.speak': '语音状态',
        'triage.female': '女性',
        'account.deleteTitle': '删除账户',
        'account.deleteWarning': '此操作无法撤销。您的所有数据将被永久删除。',
        'account.confirmText': '输入"DELETE MY ACCOUNT"确认:',
        'account.deleteButton': '删除我的账户',
        'qr.title': '紧急卡',
        'qr.description': '扫描以获得紧急访问',
        'qr.contains': '包含医疗要点+在线链接',
        'qr.generate': '生成二维码',
        'auth.logout': '登出',
        'language.english': '英语',
        'footer.privacy': '隐私与安全',
        'footer.privacyText': '您的医疗数据已加密并安全存储。只有您控制访问权限。',
        'footer.disclaimer': '医疗免责声明',
        'footer.disclaimerText': '这仅供参考。紧急救援人员必须验证所有医疗信息。',
        'footer.support': '支持',
        'footer.supportText': '需要帮助？联系我们的支持团队24/7获得帮助。',
        'common.save': '保存',
        'common.print': '打印',
        'common.close': '关闭',
        'common.yes': '是',
        'common.no': '否',
        'common.comingSoon': '即将推出'
      }
    };

    // Current language state
    let currentLanguage = localStorage.getItem('myqer_lang') || 'en';

    // Demo data with localStorage persistence
    const demoData = {
      profile: {
        fullName: localStorage.getItem('myqer_fullName') || 'Dr. Sarah Johnson',
        dateOfBirth: localStorage.getItem('myqer_dateOfBirth') || '1985-03-15',
        country: localStorage.getItem('myqer_country') || 'United States',
        nationalId: localStorage.getItem('myqer_nationalId') || '',
        code: 'MYQER-CJ00FTX'
      },
      health: {
        bloodType: localStorage.getItem('myqer_bloodType') || 'A-',
        organDonor: localStorage.getItem('myqer_organDonor') || 'yes',
        allergies: localStorage.getItem('myqer_allergies') || 'Penicillin, Shellfish',
        conditions: localStorage.getItem('myqer_conditions') || 'Type 1 Diabetes, Hypertension',
        medications: localStorage.getItem('myqer_medications') || 'Insulin, Lisinopril',
        lifeSupport: localStorage.getItem('myqer_lifeSupport') || 'limited'
      },
      contacts: JSON.parse(localStorage.getItem('myqer_contacts') || '[{"name":"Michael Johnson","relation":"Spouse","phone":"+1 (555) 123-4567"},{"name":"Dr. Emily Chen","relation":"Primary Doctor","phone":"+1 (555) 987-6543"}]')
    };

    // Translation function
    function translate(key, lang = currentLanguage) {
      return translations[lang] && translations[lang][key] ? translations[lang][key] : key;
    }

    // Update all translatable elements
    function updateTranslations() {
      document.querySelectorAll('[data-translate]').forEach(element => {
        const key = element.getAttribute('data-translate');
        element.textContent = translate(key);
      });

      // Update placeholders
      document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
        const key = element.getAttribute('data-translate-placeholder');
        element.placeholder = translate(key);
      });

      // Handle RTL for Arabic
      if (currentLanguage === 'ar') {
        document.body.classList.add('rtl');
        document.documentElement.dir = 'rtl';
      } else {
        document.body.classList.remove('rtl');
        document.documentElement.dir = 'ltr';
      }
    }

    // Language selector functionality
    function initLanguageSelector() {
      const languageBtn = document.getElementById('languageBtn');
      const languageDropdown = document.getElementById('languageDropdown');
      const currentFlag = document.getElementById('currentFlag');
      const currentLang = document.getElementById('currentLang');

      const languageMap = {
        'en': { flag: '🇺🇸', name: 'English' },
        'es': { flag: '🇪🇸', name: 'Español' },
        'fr': { flag: '🇫🇷', name: 'Français' },
        'de': { flag: '🇩🇪', name: 'Deutsch' },
        'it': { flag: '🇮🇹', name: 'Italiano' },
        'pt': { flag: '🇵🇹', name: 'Português' },
        'ro': { flag: '🇷🇴', name: 'Română' },
        'ar': { flag: '🇸🇦', name: 'العربية' },
        'hi': { flag: '🇮🇳', name: 'हिन्दी' },
        'zh': { flag: '🇨🇳', name: '中文' }
      };

      // Set initial language
      if (languageMap[currentLanguage]) {
        currentFlag.textContent = languageMap[currentLanguage].flag;
        currentLang.textContent = languageMap[currentLanguage].name;
        
        // Update active state
        document.querySelectorAll('.language-option').forEach(opt => {
          opt.classList.toggle('active', opt.getAttribute('data-lang') === currentLanguage);
        });
      }

      languageBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        languageDropdown.classList.toggle('show');
      });

      document.addEventListener('click', () => {
        languageDropdown.classList.remove('show');
      });

      document.querySelectorAll('.language-option').forEach(option => {
        option.addEventListener('click', (e) => {
          e.stopPropagation();
          const lang = option.getAttribute('data-lang');
          
          // Update active state
          document.querySelectorAll('.language-option').forEach(opt => opt.classList.remove('active'));
          option.classList.add('active');
          
          // Update current language
          currentLanguage = lang;
          localStorage.setItem('myqer_lang', lang);
          currentFlag.textContent = languageMap[lang].flag;
          currentLang.textContent = languageMap[lang].name;
          
          // Update all translations
          updateTranslations();
          
          // Close dropdown
          languageDropdown.classList.remove('show');
          
          // Show toast
          showToast(`Language changed to ${languageMap[lang].name}`, 'success');
        });
      });
    }

    // Generate compact QR payload
    function generateCompactQRPayload() {
      const name = demoData.profile.fullName || '';
      const dob = demoData.profile.dateOfBirth || '';
      const blood = demoData.health.bloodType || '';
      const allergies = demoData.health.allergies || '';
      const conditions = demoData.health.conditions || '';
      const medications = demoData.health.medications || '';
      const organDonor = demoData.health.organDonor === 'yes' ? 'Yes' : '';
      
      // Get first ICE contact
      const firstContact = demoData.contacts.length > 0 ? 
        `${demoData.contacts[0].name} (${demoData.contacts[0].phone})` : '';
      
      // Format date compactly
      let shortDob = dob;
      if (dob) {
        try {
          const date = new Date(dob);
          shortDob = date.toLocaleDateString('en-GB', { 
            day: '2-digit', 
            month: 'short', 
            year: 'numeric' 
          });
        } catch (e) {
          shortDob = dob;
        }
      }
      
      // Build compact payload
      const parts = [];
      if (name) parts.push(`Name: ${name}`);
      if (shortDob) parts.push(`DOB: ${shortDob}`);
      if (blood) parts.push(`Blood: ${blood}`);
      if (allergies) parts.push(`Allergies: ${allergies}`);
      if (conditions) parts.push(`Conditions: ${conditions}`);
      if (medications) parts.push(`Meds: ${medications}`);
      if (organDonor) parts.push(`Organ Donor: ${organDonor}`);
      if (firstContact) parts.push(`ICE: ${firstContact}`);
      
      const essentials = parts.join(' | ');
      const link = `https://myqer.com/card.html?code=${demoData.profile.code}`;
      
      return `${essentials} | Link: ${link}`;
    }

    // QR code generation
    function generateQRCode(canvasId = 'qrCanvas') {
      const canvas = document.getElementById(canvasId);
      
      if (!canvas) {
        console.error('QR Canvas not found:', canvasId);
        return;
      }
      
      if (typeof QRCode === 'undefined') {
        console.log('QRCode library not loaded, creating manual QR');
        createManualQR(canvasId);
        return;
      }
      
      const compactPayload = generateCompactQRPayload();
      
      try {
        QRCode.toCanvas(canvas, compactPayload, { 
          width: 120, 
          margin: 2,
          errorCorrectionLevel: 'L',
          color: {
            dark: '#1e293b',
            light: '#ffffff'
          }
        }, function(error) {
          if (error) {
            console.error('QR generation failed:', error);
            createManualQR(canvasId);
          } else {
            console.log('✅ QR generated for', canvasId);
          }
        });
      } catch (e) {
        console.error('QR generation exception:', e);
        createManualQR(canvasId);
      }
    }

    // Manual QR creation as fallback
    function createManualQR(canvasId = 'qrCanvas') {
      const canvas = document.getElementById(canvasId);
      const ctx = canvas.getContext('2d');
      const size = 120;
      
      // Clear canvas
      ctx.fillStyle = 'white';
      ctx.fillRect(0, 0, size, size);
      
      // Create QR pattern
      ctx.fillStyle = '#1e293b';
      const cellSize = Math.floor(size / 21);
      const pattern = [
        [1,1,1,1,1,1,1,0,1,0,1,0,1,1,1,1,1,1,1],
        [1,0,0,0,0,0,1,0,0,1,0,1,1,0,0,0,0,0,1],
        [1,0,1,1,1,0,1,0,1,1,1,0,1,0,1,1,1,0,1],
        [1,0,1,1,1,0,1,0,0,0,1,1,1,0,1,1,1,0,1],
        [1,0,1,1,1,0,1,0,1,0,0,0,1,0,1,1,1,0,1],
        [1,0,0,0,0,0,1,0,1,1,0,1,1,0,0,0,0,0,1],
        [1,1,1,1,1,1,1,0,1,0,1,0,1,1,1,1,1,1,1],
        [0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0],
        [1,0,1,1,0,1,1,1,0,0,1,0,1,1,0,1,1,0,1],
        [0,1,0,0,1,0,0,0,1,1,0,1,0,0,1,0,0,1,0],
        [1,1,1,0,0,1,1,1,1,0,1,0,1,1,1,0,0,1,1],
        [0,0,0,1,1,0,0,0,0,1,0,1,0,0,0,1,1,0,0],
        [1,1,1,1,1,1,1,0,1,0,1,0,1,1,1,1,1,1,1],
        [1,0,0,0,0,0,1,0,0,1,0,1,1,0,0,0,0,0,1],
        [1,0,1,1,1,0,1,0,1,1,1,0,1,0,1,1,1,0,1],
        [1,0,1,1,1,0,1,0,0,0,1,1,1,0,1,1,1,0,1],
        [1,0,1,1,1,0,1,0,1,0,0,0,1,0,1,1,1,0,1],
        [1,0,0,0,0,0,1,0,1,1,0,1,1,0,0,0,0,0,1],
        [1,1,1,1,1,1,1,0,1,0,1,0,1,1,1,1,1,1,1]
      ];
      
      const startX = (size - pattern[0].length * cellSize) / 2;
      const startY = (size - pattern.length * cellSize) / 2;
      
      for (let row = 0; row < pattern.length; row++) {
        for (let col = 0; col < pattern[row].length; col++) {
          if (pattern[row][col] === 1) {
            ctx.fillRect(
              startX + col * cellSize, 
              startY + row * cellSize, 
              cellSize, 
              cellSize
            );
          }
        }
      }
    }

    // Toast notification system
    function showToast(message, type = 'success') {
      const toast = document.createElement('div');
      toast.className = `toast toast-${type}`;
      toast.textContent = message;
      document.body.appendChild(toast);
      
      setTimeout(() => toast.classList.add('show'), 100);
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => document.body.removeChild(toast), 300);
      }, 3000);
    }

    // Speech synthesis for triage info
    function speakTriageInfo() {
      if ('speechSynthesis' in window) {
        const text = `Triage status: Moderate. Patient has 2 medical conditions, 2 current medications, and 2 known allergies. Emergency contact: ${demoData.contacts[0].name} at ${demoData.contacts[0].phone}`;
        
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.rate = 0.8;
        utterance.pitch = 1.1;
        utterance.volume = 1.0;
        
        // Set female voice if available
        const voices = speechSynthesis.getVoices();
        const femaleVoice = voices.find(voice => voice.name.toLowerCase().includes('female') || voice.name.toLowerCase().includes('woman'));
        if (femaleVoice) {
          utterance.voice = femaleVoice;
        }
        
        speechSynthesis.speak(utterance);
      } else {
        showToast('Speech synthesis not supported', 'warning');
      }
    }

    // Contact management
    function initContactManagement() {
      const addContactBtn = document.getElementById('addContactBtn');
      const contactsList = document.getElementById('contactsList');

      addContactBtn.addEventListener('click', () => {
        if (contactsList.children.length >= CONFIG.maxContacts) {
          showToast(`Maximum ${CONFIG.maxContacts} contacts allowed`, 'warning');
          return;
        }

        const contactDiv = document.createElement('div');
        contactDiv.className = 'bg-slate-50 rounded-lg p-4';
        contactDiv.innerHTML = `
          <div class="space-y-3">
            <input class="w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Name" data-translate-placeholder="contacts.namePlaceholder">
            <input class="w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Relationship" data-translate-placeholder="contacts.relationshipPlaceholder">
            <div class="flex gap-3">
              <input class="flex-1 px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Phone" data-translate-placeholder="contacts.phonePlaceholder">
              <button class="px-3 py-2 bg-slate-100 text-slate-600 rounded-lg text-sm hover:bg-red-50 hover:text-red-600 transition-colors" onclick="removeContact(this)">🗑</button>
            </div>
          </div>
        `;
        
        contactsList.appendChild(contactDiv);
        updateTranslations(); // Update placeholders for new contact
      });
    }

    // Remove contact function (global scope for onclick)
    window.removeContact = function(button) {
      const contactDiv = button.closest('.bg-slate-50');
      contactDiv.remove();
      saveContactsData();
    };

    // Save contacts data
    function saveContactsData() {
      const contacts = [];
      document.querySelectorAll('#contactsList .bg-slate-50').forEach(contactDiv => {
        const inputs = contactDiv.querySelectorAll('input');
        if (inputs.length >= 3) {
          contacts.push({
            name: inputs[0].value,
            relation: inputs[1].value,
            phone: inputs[2].value
          });
        }
      });
      demoData.contacts = contacts;
      localStorage.setItem('myqer_contacts', JSON.stringify(contacts));
    }

    // Export functionality
    function initExportFunctions() {
      const exportPNG = document.getElementById('exportPNG');
      const printQR = document.getElementById('printQR');
      const generateBtn = document.getElementById('generateBtn');

      exportPNG.addEventListener('click', () => {
        const canvas = document.getElementById('qrCanvas');
        const link = document.createElement('a');
        link.download = `MYQER-${demoData.profile.code}.png`;
        link.href = canvas.toDataURL();
        link.click();
        showToast('QR Code exported as PNG', 'success');
      });

      printQR.addEventListener('click', () => {
        const canvas = document.getElementById('qrCanvas');
        const printWindow = window.open('', '_blank');
        printWindow.document.write(`
          <html>
            <head><title>MYQER Emergency QR Code</title></head>
            <body style="text-align: center; font-family: 'Inter', Arial, sans-serif;">
              <h2>MYQER Emergency QR Code</h2>
              <p>Code: ${demoData.profile.code}</p>
              <img src="${canvas.toDataURL()}" style="border: 2px solid #dc2626; border-radius: 8px;">
              <p style="font-size: 12px; color: #666;">Scan for emergency medical information</p>
            </body>
          </html>
        `);
        printWindow.document.close();
        printWindow.print();
      });

      generateBtn.addEventListener('click', () => {
        showToast('Generating new QR code...', 'success');
        setTimeout(() => generateQRCode(), 100);
      });
    }

    // Form handling with localStorage persistence
    function initFormHandling() {
      const profileForm = document.getElementById('profileForm');
      const healthForm = document.getElementById('healthForm');

      profileForm.addEventListener('submit', (e) => {
        e.preventDefault();
        showToast('Identity saved successfully', 'success');
        
        // Update demo data and localStorage
        demoData.profile.fullName = document.getElementById('fullName').value;
        demoData.profile.dateOfBirth = document.getElementById('dateOfBirth').value;
        demoData.profile.country = document.getElementById('country').value;
        demoData.profile.nationalId = document.getElementById('nationalId').value;
        
        localStorage.setItem('myqer_fullName', demoData.profile.fullName);
        localStorage.setItem('myqer_dateOfBirth', demoData.profile.dateOfBirth);
        localStorage.setItem('myqer_country', demoData.profile.country);
        localStorage.setItem('myqer_nationalId', demoData.profile.nationalId);
        
        // Regenerate QR with new data
        setTimeout(() => generateQRCode(), 50);
      });

      healthForm.addEventListener('submit', (e) => {
        e.preventDefault();
        showToast('Critical information saved successfully', 'success');
        
        // Update demo data and localStorage
        demoData.health.bloodType = document.getElementById('bloodType').value;
        demoData.health.organDonor = document.getElementById('organDonor').value;
        demoData.health.allergies = document.getElementById('allergies').value;
        demoData.health.conditions = document.getElementById('conditions').value;
        demoData.health.medications = document.getElementById('medications').value;
        demoData.health.lifeSupport = document.getElementById('lifeSupport').value;
        
        localStorage.setItem('myqer_bloodType', demoData.health.bloodType);
        localStorage.setItem('myqer_organDonor', demoData.health.organDonor);
        localStorage.setItem('myqer_allergies', demoData.health.allergies);
        localStorage.setItem('myqer_conditions', demoData.health.conditions);
        localStorage.setItem('myqer_medications', demoData.health.medications);
        localStorage.setItem('myqer_lifeSupport', demoData.health.lifeSupport);
        
        // Update triage counts
        updateTriageCounts();
        
        // Regenerate QR with new data
        setTimeout(() => generateQRCode(), 50);
      });
    }

    // Update triage counts
    function updateTriageCounts() {
      const conditions = demoData.health.conditions.split(',').filter(c => c.trim()).length;
      const medications = demoData.health.medications.split(',').filter(m => m.trim()).length;
      const allergies = demoData.health.allergies.split(',').filter(a => a.trim()).length;
      
      document.getElementById('conditionCount').textContent = conditions;
      document.getElementById('medicationCount').textContent = medications;
      document.getElementById('allergyCount').textContent = allergies;
      
      // Update triage status based on total risk factors
      const totalRisk = conditions + medications + allergies;
      const triageStatus = document.getElementById('triageStatus');
      
      if (totalRisk <= 2) {
        triageStatus.className = 'triage-pill triage-green';
        triageStatus.innerHTML = '🟢 <span data-translate="triage.low">LOW</span>';
      } else if (totalRisk <= 5) {
        triageStatus.className = 'triage-pill triage-yellow';
        triageStatus.innerHTML = '⚠️ <span data-translate="triage.moderate">MODERATE</span>';
      } else if (totalRisk <= 8) {
        triageStatus.className = 'triage-pill triage-red';
        triageStatus.innerHTML = '🔴 <span data-translate="triage.high">HIGH</span>';
      } else {
        triageStatus.className = 'triage-pill triage-black';
        triageStatus.innerHTML = '⚫ <span data-translate="triage.critical">CRITICAL</span>';
      }
      
      updateTranslations(); // Update the new status text
    }

    // Triage functionality
    function initTriage() {
      const speakTriage = document.getElementById('speakTriage');
      
      speakTriage.addEventListener('click', () => {
        speakTriageInfo();
      });
      
      // Initial triage count update
      updateTriageCounts();
    }

    // Delete account functionality
    function initDeleteAccount() {
      const deleteConfirmInput = document.getElementById('deleteConfirmInput');
      const deleteAccountBtn = document.getElementById('deleteAccountBtn');

      deleteConfirmInput.addEventListener('input', () => {
        const isValid = deleteConfirmInput.value === 'DELETE MY ACCOUNT';
        deleteAccountBtn.disabled = !isValid;
      });

      deleteAccountBtn.addEventListener('click', () => {
        if (deleteConfirmInput.value === 'DELETE MY ACCOUNT') {
          // Clear all localStorage data
          Object.keys(localStorage).forEach(key => {
            if (key.startsWith('myqer_')) {
              localStorage.removeItem(key);
            }
          });
          
          showToast('Account deleted successfully. Redirecting...', 'success');
          
          // Redirect to homepage after 2 seconds
          setTimeout(() => {
            window.location.href = '/';
          }, 2000);
        }
      });
    }

    // Logout functionality
    function initLogout() {
      const logoutBtn = document.getElementById('logoutBtn');
      
      logoutBtn.addEventListener('click', () => {
        // Clear session but keep data
        showToast('Logging out...', 'success');
        
        // Redirect to homepage after 1 second
        setTimeout(() => {
          window.location.href = '/';
        }, 1000);
      });
    }

    // Load saved data into forms
    function loadSavedData() {
      // Load profile data
      document.getElementById('fullName').value = demoData.profile.fullName;
      document.getElementById('dateOfBirth').value = demoData.profile.dateOfBirth;
      document.getElementById('country').value = demoData.profile.country;
      document.getElementById('nationalId').value = demoData.profile.nationalId;
      
      // Load health data
      document.getElementById('bloodType').value = demoData.health.bloodType;
      document.getElementById('organDonor').value = demoData.health.organDonor;
      document.getElementById('allergies').value = demoData.health.allergies;
      document.getElementById('conditions').value = demoData.health.conditions;
      document.getElementById('medications').value = demoData.health.medications;
      document.getElementById('lifeSupport').value = demoData.health.lifeSupport;
      
      // Load contacts
      const contactsList = document.getElementById('contactsList');
      contactsList.innerHTML = '';
      
      demoData.contacts.forEach(contact => {
        const contactDiv = document.createElement('div');
        contactDiv.className = 'bg-slate-50 rounded-lg p-4';
        contactDiv.innerHTML = `
          <div class="space-y-3">
            <input class="w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Name" value="${contact.name}" data-translate-placeholder="contacts.namePlaceholder">
            <input class="w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Relationship" value="${contact.relation}" data-translate-placeholder="contacts.relationshipPlaceholder">
            <div class="flex gap-3">
              <input class="flex-1 px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Phone" value="${contact.phone}" data-translate-placeholder="contacts.phonePlaceholder">
              <button class="px-3 py-2 bg-slate-100 text-slate-600 rounded-lg text-sm hover:bg-red-50 hover:text-red-600 transition-colors" onclick="removeContact(this)">🗑</button>
            </div>
          </div>
        `;
        contactsList.appendChild(contactDiv);
      });
    }

    // Initialize dashboard
    function initDashboard() {
      console.log('🚀 Initializing MYQER Dashboard v23.0');
      
      // Load saved data first
      loadSavedData();
      
      // Initialize all components
      initLanguageSelector();
      initContactManagement();
      initExportFunctions();
      initFormHandling();
      initTriage();
      initDeleteAccount();
      initLogout();
      
      // Update translations
      updateTranslations();
      
      // Generate initial QR code
      setTimeout(() => {
        generateQRCode();
      }, 100);
      
      console.log('✅ Dashboard initialized successfully');
    }

    // Start the dashboard when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initDashboard);
    } else {
      initDashboard();
    }
  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97685e048514beda',t:'MTc1NjQzMTkwOC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
