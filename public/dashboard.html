<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MYQER Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.05);
        }
        
        .premium-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(255, 255, 255, 0.92) 100%);
            backdrop-filter: blur(25px);
            border: 2px solid rgba(255, 255, 255, 0.4);
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.12),
                0 8px 16px rgba(0, 0, 0, 0.08),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }
        
        .medical-input {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid rgba(229, 231, 235, 0.6);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 500;
        }
        
        .medical-input:focus {
            background: rgba(255, 255, 255, 1);
            border-color: #3b82f6;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.12);
            transform: translateY(-1px);
        }
        
        .medical-btn {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 600;
            letter-spacing: 0.025em;
        }
        
        .medical-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .medical-btn:active {
            transform: translateY(0);
        }
        
        .gradient-border {
            position: relative;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 3px;
            border-radius: 1rem;
        }
        
        .gradient-border-content {
            background: white;
            border-radius: calc(1rem - 3px);
        }
        
        .floating-header {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }
        
        .section-header {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-bottom: 3px solid;
            position: relative;
            overflow: hidden;
        }
        
        .section-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s;
        }
        
        .section-header:hover::before {
            left: 100%;
        }
        
        .ice-contact-card {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.05) 0%, rgba(220, 38, 38, 0.05) 100%);
            border: 2px solid rgba(239, 68, 68, 0.2);
            transition: all 0.3s ease;
        }
        
        .ice-contact-card:hover {
            border-color: rgba(239, 68, 68, 0.4);
            box-shadow: 0 8px 25px rgba(239, 68, 68, 0.15);
        }
        
        .completion-ring {
            filter: drop-shadow(0 4px 8px rgba(59, 130, 246, 0.3));
        }
        
        [dir="rtl"] {
            text-align: right;
        }
        [dir="rtl"] .flex {
            flex-direction: row-reverse;
        }
        
        .animate-pulse-slow {
            animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        .hero-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
        }
        
        .card-hover {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card-hover:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 min-h-screen">
    <!-- Toast Container -->
    <div id="toast-container" class="fixed top-4 right-4 z-50 space-y-2"></div>

    <!-- Language Selector -->
    <div class="fixed top-6 left-6 z-40">
        <select id="language-selector" class="medical-input px-4 py-3 rounded-xl text-sm outline-none shadow-lg">
            <option value="en">ğŸ‡ºğŸ‡¸ English</option>
            <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
            <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
            <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
            <option value="it">ğŸ‡®ğŸ‡¹ Italiano</option>
            <option value="hi">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
            <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
            <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
            <option value="hu">ğŸ‡­ğŸ‡º Magyar</option>
            <option value="ro">ğŸ‡·ğŸ‡´ RomÃ¢nÄƒ</option>
        </select>
    </div>

    <!-- Floating Header -->
    <header class="floating-header mx-6 mt-6 rounded-3xl sticky top-6 z-30">
        <div class="max-w-7xl mx-auto px-8 lg:px-12 py-8">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <div class="w-12 h-12 hero-gradient rounded-2xl flex items-center justify-center">
                        <span class="text-white font-bold text-xl">M</span>
                    </div>
                    <div>
                        <h1 class="text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent" data-translate="dashboard_title">MYQER Dashboard</h1>
                        <p class="text-gray-500 font-medium" data-translate="version">Version 3.0 - Premium Edition</p>
                    </div>
                </div>
                <div class="flex items-center space-x-8">
                    <div class="flex items-center space-x-4">
                        <div class="text-right">
                            <span class="block text-sm text-gray-600 font-semibold" data-translate="profile_completion">Profile Completion</span>
                            <span class="text-xs text-gray-500" data-translate="complete_for_qr">Complete for QR access</span>
                        </div>
                        <div class="relative w-16 h-16 completion-ring">
                            <svg class="w-16 h-16 transform -rotate-90" viewBox="0 0 36 36">
                                <path class="text-gray-200" stroke="currentColor" stroke-width="2.5" fill="none" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"></path>
                                <path id="completion-circle" class="text-blue-500" stroke="currentColor" stroke-width="2.5" fill="none" stroke-dasharray="0, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"></path>
                            </svg>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <span id="completion-text" class="text-sm font-bold text-gray-700">0%</span>
                            </div>
                        </div>
                    </div>
                    <button onclick="signOut()" class="medical-btn bg-gradient-to-r from-red-500 to-red-600 text-white px-8 py-4 rounded-2xl hover:from-red-600 hover:to-red-700 shadow-lg">
                        <span data-translate="sign_out">Sign Out</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-6 sm:px-8 lg:px-12 py-12">
        <!-- 3 Premium Cards Layout -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-12">
            
            <!-- Identity & ICE Card - Enhanced -->
            <div class="premium-card rounded-3xl p-8 card-hover">
                <div class="section-header -mx-8 -mt-8 px-8 pt-8 pb-6 mb-8 rounded-t-3xl border-blue-500">
                    <h2 class="text-2xl font-bold text-gray-800 flex items-center">
                        <div class="w-4 h-4 bg-blue-500 rounded-full mr-4 animate-pulse-slow"></div>
                        <span data-translate="identity_ice">Identity & Emergency Contacts</span>
                    </h2>
                    <p class="text-sm text-gray-600 mt-2 font-medium" data-translate="identity_desc">Personal information and emergency contacts</p>
                </div>
                
                <!-- Identity Section -->
                <div class="space-y-6 mb-8">
                    <div class="grid grid-cols-1 gap-4">
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-3" data-translate="full_name">Full Name</label>
                            <input type="text" id="full_name" class="medical-input w-full px-4 py-3 rounded-xl outline-none text-lg" data-translate-placeholder="enter_full_name">
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-3" data-translate="date_of_birth">Date of Birth</label>
                            <input type="text" id="date_of_birth" class="medical-input w-full px-4 py-3 rounded-xl outline-none text-lg" placeholder="DD/MM/YYYY">
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-3" data-translate="country">Country</label>
                            <select id="country" class="medical-input w-full px-4 py-3 rounded-xl outline-none text-lg">
                                <option value="" data-translate="select_country">Select Country</option>
                                <option value="US">ğŸ‡ºğŸ‡¸ United States</option>
                                <option value="CA">ğŸ‡¨ğŸ‡¦ Canada</option>
                                <option value="GB">ğŸ‡¬ğŸ‡§ United Kingdom</option>
                                <option value="AU">ğŸ‡¦ğŸ‡º Australia</option>
                                <option value="DE">ğŸ‡©ğŸ‡ª Germany</option>
                                <option value="FR">ğŸ‡«ğŸ‡· France</option>
                                <option value="IT">ğŸ‡®ğŸ‡¹ Italy</option>
                                <option value="ES">ğŸ‡ªğŸ‡¸ Spain</option>
                                <option value="NL">ğŸ‡³ğŸ‡± Netherlands</option>
                                <option value="SE">ğŸ‡¸ğŸ‡ª Sweden</option>
                                <option value="NO">ğŸ‡³ğŸ‡´ Norway</option>
                                <option value="DK">ğŸ‡©ğŸ‡° Denmark</option>
                                <option value="FI">ğŸ‡«ğŸ‡® Finland</option>
                                <option value="JP">ğŸ‡¯ğŸ‡µ Japan</option>
                                <option value="KR">ğŸ‡°ğŸ‡· South Korea</option>
                                <option value="SG">ğŸ‡¸ğŸ‡¬ Singapore</option>
                                <option value="NZ">ğŸ‡³ğŸ‡¿ New Zealand</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-3" data-translate="health_id">National Health ID</label>
                            <input type="text" id="national_health_id" class="medical-input w-full px-4 py-3 rounded-xl outline-none text-lg" data-translate-placeholder="enter_health_id">
                        </div>
                    </div>
                </div>

                <!-- ICE Contacts Section -->
                <div class="border-t-2 border-gray-100 pt-8">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h3 class="text-xl font-bold text-red-700 flex items-center">
                                <span class="text-2xl mr-3">ğŸš¨</span>
                                <span data-translate="ice_contacts">ICE Contacts</span>
                            </h3>
                            <p class="text-sm text-gray-600 font-medium mt-1" data-translate="ice_desc">In Case of Emergency</p>
                        </div>
                        <div class="flex flex-col items-end space-y-3">
                            <span id="contact-count" class="text-xs font-bold text-red-600 bg-red-50 px-3 py-2 rounded-full border border-red-200">0 of 3</span>
                            <button onclick="addContact()" id="add-contact-btn" class="medical-btn bg-gradient-to-r from-red-500 to-red-600 text-white px-4 py-2 rounded-xl hover:from-red-600 hover:to-red-700 font-semibold text-sm shadow-lg">
                                <span data-translate="add_contact">+ Add Contact</span>
                            </button>
                        </div>
                    </div>
                    <div id="contacts-list" class="space-y-4">
                        <!-- Contacts will be dynamically added here -->
                    </div>
                </div>
            </div>

            <!-- Health Information Card - Enhanced -->
            <div class="premium-card rounded-3xl p-8 card-hover">
                <div class="section-header -mx-8 -mt-8 px-8 pt-8 pb-6 mb-8 rounded-t-3xl border-green-500">
                    <h2 class="text-2xl font-bold text-gray-800 flex items-center">
                        <div class="w-4 h-4 bg-green-500 rounded-full mr-4 animate-pulse-slow"></div>
                        <span data-translate="health_info">Health Information</span>
                    </h2>
                    <p class="text-sm text-gray-600 mt-2 font-medium" data-translate="health_desc">Medical details and conditions</p>
                </div>
                
                <div class="space-y-6">
                    <div class="grid grid-cols-1 gap-4">
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-3" data-translate="blood_type">Blood Type</label>
                            <select id="blood_type" class="medical-input w-full px-4 py-3 rounded-xl outline-none text-lg">
                                <option value="" data-translate="select_blood_type">Select Blood Type</option>
                                <option value="A+">ğŸ©¸ A+</option>
                                <option value="A-">ğŸ©¸ A-</option>
                                <option value="B+">ğŸ©¸ B+</option>
                                <option value="B-">ğŸ©¸ B-</option>
                                <option value="AB+">ğŸ©¸ AB+</option>
                                <option value="AB-">ğŸ©¸ AB-</option>
                                <option value="O+">ğŸ©¸ O+</option>
                                <option value="O-">ğŸ©¸ O-</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-3" data-translate="organ_donor">Organ Donor</label>
                            <select id="organ_donor" class="medical-input w-full px-4 py-3 rounded-xl outline-none text-lg">
                                <option value="" data-translate="unspecified">Unspecified</option>
                                <option value="Yes" data-translate="yes">âœ… Yes</option>
                                <option value="No" data-translate="no">âŒ No</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-3" data-translate="life_support">Life Support Preference</label>
                            <select id="life_support_pref" class="medical-input w-full px-4 py-3 rounded-xl outline-none text-lg">
                                <option value="" data-translate="select_preference">Select Preference</option>
                                <option value="Full" data-translate="full_support">ğŸ¥ Full Support</option>
                                <option value="Limited" data-translate="limited_support">âš•ï¸ Limited Support</option>
                                <option value="Comfort" data-translate="comfort_care">ğŸ¤² Comfort Care Only</option>
                                <option value="DNR" data-translate="dnr">ğŸš« Do Not Resuscitate</option>
                            </select>
                        </div>
                    </div>

                    <!-- Pills Inputs -->
                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-3" data-translate="allergies">Allergies</label>
                            <div class="flex flex-wrap gap-2 mb-3" id="allergies-pills"></div>
                            <input type="text" id="allergies-input" class="medical-input w-full px-4 py-3 rounded-xl outline-none" data-translate-placeholder="type_allergy">
                        </div>

                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-3" data-translate="conditions">Medical Conditions</label>
                            <div class="flex flex-wrap gap-2 mb-3" id="conditions-pills"></div>
                            <input type="text" id="conditions-input" class="medical-input w-full px-4 py-3 rounded-xl outline-none" data-translate-placeholder="type_condition">
                        </div>

                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-3" data-translate="medications">Medications</label>
                            <div class="flex flex-wrap gap-2 mb-3" id="medications-pills"></div>
                            <input type="text" id="medications-input" class="medical-input w-full px-4 py-3 rounded-xl outline-none" data-translate-placeholder="type_medication">
                        </div>
                    </div>

                    <!-- Triage Badge -->
                    <div class="border-t-2 border-gray-100 pt-6">
                        <div class="flex items-center justify-between mb-4">
                            <label class="block text-sm font-bold text-gray-700" data-translate="triage_priority">Triage Priority</label>
                            <select id="triage_override" class="medical-input px-4 py-2 rounded-lg text-sm outline-none">
                                <option value="Auto" data-translate="auto">ğŸ¤– Auto</option>
                                <option value="Green">ğŸŸ¢ Green</option>
                                <option value="Amber">ğŸŸ¡ Amber</option>
                                <option value="Red">ğŸ”´ Red</option>
                                <option value="Black">âš« Black</option>
                            </select>
                        </div>
                        <div id="triage-badge" class="inline-flex items-center px-4 py-2 rounded-full text-sm font-bold bg-gray-100 text-gray-800 shadow-lg">
                            <span class="w-3 h-3 rounded-full mr-3 bg-gray-400"></span>
                            <span data-translate="not_assessed">Not Assessed</span>
                        </div>
                        <div class="mt-4 p-4 bg-amber-50 border border-amber-200 rounded-xl">
                            <p class="text-xs text-amber-800 leading-relaxed">
                                <strong data-translate="disclaimer">âš ï¸ Disclaimer:</strong> <span data-translate="disclaimer_text">MYQER does not diagnose or provide medical advice. This triage label is user-provided and assistive only for responders.</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- QR Code Card - Enhanced -->
            <div class="premium-card rounded-3xl p-8 card-hover">
                <div class="section-header -mx-8 -mt-8 px-8 pt-8 pb-6 mb-8 rounded-t-3xl border-purple-500">
                    <h2 class="text-2xl font-bold text-gray-800 flex items-center">
                        <div class="w-4 h-4 bg-purple-500 rounded-full mr-4 animate-pulse-slow"></div>
                        <span data-translate="qr_code">Your QR Code</span>
                    </h2>
                    <p class="text-sm text-gray-600 mt-2 font-medium" data-translate="qr_desc">Emergency access portal</p>
                </div>
                
                <div id="qr-section">
                    <div class="text-center py-12">
                        <div class="w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-purple-100 to-purple-200 rounded-3xl flex items-center justify-center">
                            <span class="text-4xl">ğŸ“±</span>
                        </div>
                        <button onclick="generateQRCode()" id="generate-qr-btn" class="medical-btn w-full bg-gradient-to-r from-purple-500 to-purple-600 text-white py-4 rounded-2xl hover:from-purple-600 hover:to-purple-700 font-bold text-lg shadow-lg">
                            <span data-translate="generate_qr">âœ¨ Generate QR Code</span>
                        </button>
                        <p class="text-xs text-gray-500 mt-4" data-translate="qr_requirement">Complete your profile to generate QR code</p>
                    </div>
                </div>
                
                <div id="qr-display" class="hidden">
                    <div class="text-center mb-6">
                        <div class="inline-block p-4 bg-white rounded-2xl shadow-lg border-4 border-purple-200">
                            <canvas id="qr-canvas" class="mx-auto"></canvas>
                        </div>
                    </div>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2" data-translate="share_link">Share Link</label>
                            <div class="flex rounded-xl overflow-hidden shadow-lg">
                                <input type="text" id="share-link" readonly class="medical-input flex-1 px-4 py-3 rounded-l-xl rounded-r-none bg-gray-50 text-sm border-r-0">
                                <button onclick="copyLink()" class="px-6 py-3 bg-gradient-to-r from-gray-600 to-gray-700 text-white hover:from-gray-700 hover:to-gray-800 transition-all text-sm font-bold rounded-r-xl">
                                    <span data-translate="copy">ğŸ“‹ Copy</span>
                                </button>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <button onclick="exportPNG()" class="medical-btn bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 rounded-xl hover:from-blue-600 hover:to-blue-700 text-sm font-bold shadow-lg">
                                <span data-translate="export_png">ğŸ’¾ Export PNG</span>
                            </button>
                            <button onclick="printQR()" class="medical-btn bg-gradient-to-r from-green-500 to-green-600 text-white py-3 rounded-xl hover:from-green-600 hover:to-green-700 text-sm font-bold shadow-lg">
                                <span data-translate="print">ğŸ–¨ï¸ Print</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Delete Account Card - Full Width Premium -->
        <div class="gradient-border card-hover">
            <div class="gradient-border-content p-12 text-center">
                <div class="max-w-2xl mx-auto">
                    <div class="w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-red-100 to-red-200 rounded-full flex items-center justify-center">
                        <span class="text-4xl">âš ï¸</span>
                    </div>
                    <h2 class="text-3xl font-bold text-red-900 mb-4" data-translate="danger_zone">Danger Zone</h2>
                    <p class="text-red-700 text-lg mb-8 leading-relaxed font-medium" data-translate="delete_warning">
                        This action cannot be undone. This will permanently delete your account and all associated data.
                    </p>
                    <button onclick="deleteAccount()" class="medical-btn bg-gradient-to-r from-red-600 to-red-700 text-white px-12 py-4 rounded-2xl hover:from-red-700 hover:to-red-800 font-bold text-lg shadow-lg">
                        <span data-translate="delete_account">ğŸ—‘ï¸ Delete Account</span>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Supabase Configuration
        const SUPABASE_URL = 'https://tgddpmxpbgrzrbzpomou.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRnZGRwbXhwYmdyenJienBvbW91Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwNDgxMTMsImV4cCI6MjA3MTYyNDExM30.uXntx0rZISv927MQAG1LgGKA-lA08hSkzXMre7Bk2QM';
        
        const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        
        let currentUser = null;
        let debounceTimers = {};
        let contacts = [];
        let allergies = [];
        let conditions = [];
        let medications = [];
        let currentLanguage = 'en';

        // Translations - Enhanced
        const translations = {
            en: {
                dashboard_title: "MYQER Dashboard",
                version: "Version 3.0 - Premium Edition",
                profile_completion: "Profile Completion",
                complete_for_qr: "Complete for QR access",
                sign_out: "Sign Out",
                identity_ice: "Identity & Emergency Contacts",
                identity_desc: "Personal information and emergency contacts",
                full_name: "Full Name",
                enter_full_name: "Enter your full name",
                date_of_birth: "Date of Birth",
                country: "Country",
                select_country: "Select Country",
                health_id: "National Health ID",
                enter_health_id: "Enter health ID number",
                ice_contacts: "ICE Contacts",
                ice_desc: "In Case of Emergency",
                add_contact: "+ Add Contact",
                health_info: "Health Information",
                health_desc: "Medical details and conditions",
                blood_type: "Blood Type",
                select_blood_type: "Select Blood Type",
                organ_donor: "Organ Donor",
                unspecified: "Unspecified",
                yes: "Yes",
                no: "No",
                life_support: "Life Support Preference",
                select_preference: "Select Preference",
                full_support: "Full Support",
                limited_support: "Limited Support",
                comfort_care: "Comfort Care Only",
                dnr: "Do Not Resuscitate",
                allergies: "Allergies",
                type_allergy: "Type allergy and press Enter",
                conditions: "Medical Conditions",
                type_condition: "Type condition and press Enter",
                medications: "Medications",
                type_medication: "Type medication and press Enter",
                triage_priority: "Triage Priority",
                auto: "Auto",
                not_assessed: "Not Assessed",
                disclaimer: "Disclaimer:",
                disclaimer_text: "MYQER does not diagnose or provide medical advice. This triage label is user-provided and assistive only for responders.",
                qr_code: "Your QR Code",
                qr_desc: "Emergency access portal",
                generate_qr: "Generate QR Code",
                qr_requirement: "Complete your profile to generate QR code",
                share_link: "Share Link",
                copy: "Copy",
                export_png: "Export PNG",
                print: "Print",
                danger_zone: "Danger Zone",
                delete_warning: "This action cannot be undone. This will permanently delete your account and all associated data.",
                delete_account: "Delete Account"
            },
            es: {
                dashboard_title: "Panel MYQER",
                version: "VersiÃ³n 3.0 - EdiciÃ³n Premium",
                profile_completion: "Completado del Perfil",
                complete_for_qr: "Completa para acceso QR",
                sign_out: "Cerrar SesiÃ³n",
                identity_ice: "Identidad y Contactos de Emergencia",
                identity_desc: "InformaciÃ³n personal y contactos de emergencia",
                full_name: "Nombre Completo",
                enter_full_name: "Ingrese su nombre completo",
                date_of_birth: "Fecha de Nacimiento",
                country: "PaÃ­s",
                select_country: "Seleccionar PaÃ­s",
                health_id: "ID de Salud Nacional",
                enter_health_id: "Ingrese nÃºmero de ID de salud",
                ice_contacts: "Contactos ICE",
                ice_desc: "En Caso de Emergencia",
                add_contact: "+ Agregar Contacto",
                health_info: "InformaciÃ³n de Salud",
                health_desc: "Detalles mÃ©dicos y condiciones",
                blood_type: "Tipo de Sangre",
                select_blood_type: "Seleccionar Tipo de Sangre",
                organ_donor: "Donante de Ã“rganos",
                unspecified: "No Especificado",
                yes: "SÃ­",
                no: "No",
                life_support: "Preferencia de Soporte Vital",
                select_preference: "Seleccionar Preferencia",
                full_support: "Soporte Completo",
                limited_support: "Soporte Limitado",
                comfort_care: "Solo Cuidados Paliativos",
                dnr: "No Resucitar",
                allergies: "Alergias",
                type_allergy: "Escriba alergia y presione Enter",
                conditions: "Condiciones MÃ©dicas",
                type_condition: "Escriba condiciÃ³n y presione Enter",
                medications: "Medicamentos",
                type_medication: "Escriba medicamento y presione Enter",
                triage_priority: "Prioridad de Triaje",
                auto: "AutomÃ¡tico",
                not_assessed: "No Evaluado",
                disclaimer: "Descargo:",
                disclaimer_text: "MYQER no diagnostica ni proporciona consejos mÃ©dicos. Esta etiqueta de triaje es proporcionada por el usuario y solo es de asistencia para los respondedores.",
                qr_code: "Su CÃ³digo QR",
                qr_desc: "Portal de acceso de emergencia",
                generate_qr: "Generar CÃ³digo QR",
                qr_requirement: "Complete su perfil para generar cÃ³digo QR",
                share_link: "Enlace para Compartir",
                copy: "Copiar",
                export_png: "Exportar PNG",
                print: "Imprimir",
                danger_zone: "Zona de Peligro",
                delete_warning: "Esta acciÃ³n no se puede deshacer. Esto eliminarÃ¡ permanentemente su cuenta y todos los datos asociados.",
                delete_account: "Eliminar Cuenta"
            },
            fr: {
                dashboard_title: "Tableau de Bord MYQER",
                version: "Version 3.0 - Ã‰dition Premium",
                profile_completion: "AchÃ¨vement du Profil",
                complete_for_qr: "ComplÃ©tez pour l'accÃ¨s QR",
                sign_out: "Se DÃ©connecter",
                identity_ice: "IdentitÃ© et Contacts d'Urgence",
                identity_desc: "Informations personnelles et contacts d'urgence",
                full_name: "Nom Complet",
                enter_full_name: "Entrez votre nom complet",
                date_of_birth: "Date de Naissance",
                country: "Pays",
                select_country: "SÃ©lectionner le Pays",
                health_id: "ID de SantÃ© National",
                enter_health_id: "Entrez le numÃ©ro d'ID de santÃ©",
                ice_contacts: "Contacts ICE",
                ice_desc: "En Cas d'Urgence",
                add_contact: "+ Ajouter Contact",
                health_info: "Informations de SantÃ©",
                health_desc: "DÃ©tails mÃ©dicaux et conditions",
                blood_type: "Groupe Sanguin",
                select_blood_type: "SÃ©lectionner le Groupe Sanguin",
                organ_donor: "Donneur d'Organes",
                unspecified: "Non SpÃ©cifiÃ©",
                yes: "Oui",
                no: "Non",
                life_support: "PrÃ©fÃ©rence de Support Vital",
                select_preference: "SÃ©lectionner la PrÃ©fÃ©rence",
                full_support: "Support Complet",
                limited_support: "Support LimitÃ©",
                comfort_care: "Soins Palliatifs Seulement",
                dnr: "Ne Pas RÃ©animer",
                allergies: "Allergies",
                type_allergy: "Tapez allergie et appuyez sur EntrÃ©e",
                conditions: "Conditions MÃ©dicales",
                type_condition: "Tapez condition et appuyez sur EntrÃ©e",
                medications: "MÃ©dicaments",
                type_medication: "Tapez mÃ©dicament et appuyez sur EntrÃ©e",
                triage_priority: "PrioritÃ© de Triage",
                auto: "Automatique",
                not_assessed: "Non Ã‰valuÃ©",
                disclaimer: "Avertissement:",
                disclaimer_text: "MYQER ne diagnostique pas et ne fournit pas de conseils mÃ©dicaux. Cette Ã©tiquette de triage est fournie par l'utilisateur et n'est qu'une aide pour les intervenants.",
                qr_code: "Votre Code QR",
                qr_desc: "Portail d'accÃ¨s d'urgence",
                generate_qr: "GÃ©nÃ©rer Code QR",
                qr_requirement: "ComplÃ©tez votre profil pour gÃ©nÃ©rer le code QR",
                share_link: "Lien de Partage",
                copy: "Copier",
                export_png: "Exporter PNG",
                print: "Imprimer",
                danger_zone: "Zone de Danger",
                delete_warning: "Cette action ne peut pas Ãªtre annulÃ©e. Cela supprimera dÃ©finitivement votre compte et toutes les donnÃ©es associÃ©es.",
                delete_account: "Supprimer le Compte"
            },
            de: {
                dashboard_title: "MYQER Dashboard",
                version: "Version 3.0 - Premium Edition",
                profile_completion: "Profil-VervollstÃ¤ndigung",
                complete_for_qr: "VervollstÃ¤ndigen fÃ¼r QR-Zugang",
                sign_out: "Abmelden",
                identity_ice: "IdentitÃ¤t & Notfallkontakte",
                identity_desc: "PersÃ¶nliche Informationen und Notfallkontakte",
                full_name: "VollstÃ¤ndiger Name",
                enter_full_name: "Geben Sie Ihren vollstÃ¤ndigen Namen ein",
                date_of_birth: "Geburtsdatum",
                country: "Land",
                select_country: "Land AuswÃ¤hlen",
                health_id: "Nationale Gesundheits-ID",
                enter_health_id: "Gesundheits-ID-Nummer eingeben",
                ice_contacts: "ICE-Kontakte",
                ice_desc: "Im Notfall",
                add_contact: "+ Kontakt HinzufÃ¼gen",
                health_info: "Gesundheitsinformationen",
                health_desc: "Medizinische Details und Bedingungen",
                blood_type: "Blutgruppe",
                select_blood_type: "Blutgruppe AuswÃ¤hlen",
                organ_donor: "Organspender",
                unspecified: "Nicht Angegeben",
                yes: "Ja",
                no: "Nein",
                life_support: "Lebenserhaltungs-PrÃ¤ferenz",
                select_preference: "PrÃ¤ferenz AuswÃ¤hlen",
                full_support: "VollstÃ¤ndige UnterstÃ¼tzung",
                limited_support: "Begrenzte UnterstÃ¼tzung",
                comfort_care: "Nur Palliativpflege",
                dnr: "Nicht Wiederbeleben",
                allergies: "Allergien",
                type_allergy: "Allergie eingeben und Enter drÃ¼cken",
                conditions: "Medizinische Bedingungen",
                type_condition: "Bedingung eingeben und Enter drÃ¼cken",
                medications: "Medikamente",
                type_medication: "Medikament eingeben und Enter drÃ¼cken",
                triage_priority: "Triage-PrioritÃ¤t",
                auto: "Automatisch",
                not_assessed: "Nicht Bewertet",
                disclaimer: "Haftungsausschluss:",
                disclaimer_text: "MYQER diagnostiziert nicht und gibt keine medizinischen RatschlÃ¤ge. Dieses Triage-Label wird vom Benutzer bereitgestellt und dient nur zur UnterstÃ¼tzung der Ersthelfer.",
                qr_code: "Ihr QR-Code",
                qr_desc: "Notfall-Zugangsportal",
                generate_qr: "QR-Code Generieren",
                qr_requirement: "VervollstÃ¤ndigen Sie Ihr Profil, um QR-Code zu generieren",
                share_link: "Freigabe-Link",
                copy: "Kopieren",
                export_png: "PNG Exportieren",
                print: "Drucken",
                danger_zone: "Gefahrenzone",
                delete_warning: "Diese Aktion kann nicht rÃ¼ckgÃ¤ngig gemacht werden. Dies wird Ihr Konto und alle zugehÃ¶rigen Daten dauerhaft lÃ¶schen.",
                delete_account: "Konto LÃ¶schen"
            },
            it: {
                dashboard_title: "Dashboard MYQER",
                version: "Versione 3.0 - Edizione Premium",
                profile_completion: "Completamento Profilo",
                complete_for_qr: "Completa per accesso QR",
                sign_out: "Disconnetti",
                identity_ice: "IdentitÃ  e Contatti di Emergenza",
                identity_desc: "Informazioni personali e contatti di emergenza",
                full_name: "Nome Completo",
                enter_full_name: "Inserisci il tuo nome completo",
                date_of_birth: "Data di Nascita",
                country: "Paese",
                select_country: "Seleziona Paese",
                health_id: "ID Sanitario Nazionale",
                enter_health_id: "Inserisci numero ID sanitario",
                ice_contacts: "Contatti ICE",
                ice_desc: "In Caso di Emergenza",
                add_contact: "+ Aggiungi Contatto",
                health_info: "Informazioni Sanitarie",
                health_desc: "Dettagli medici e condizioni",
                blood_type: "Gruppo Sanguigno",
                select_blood_type: "Seleziona Gruppo Sanguigno",
                organ_donor: "Donatore di Organi",
                unspecified: "Non Specificato",
                yes: "SÃ¬",
                no: "No",
                life_support: "Preferenza Supporto Vitale",
                select_preference: "Seleziona Preferenza",
                full_support: "Supporto Completo",
                limited_support: "Supporto Limitato",
                comfort_care: "Solo Cure Palliative",
                dnr: "Non Rianimare",
                allergies: "Allergie",
                type_allergy: "Digita allergia e premi Invio",
                conditions: "Condizioni Mediche",
                type_condition: "Digita condizione e premi Invio",
                medications: "Farmaci",
                type_medication: "Digita farmaco e premi Invio",
                triage_priority: "PrioritÃ  Triage",
                auto: "Automatico",
                not_assessed: "Non Valutato",
                disclaimer: "Disclaimer:",
                disclaimer_text: "MYQER non diagnostica nÃ© fornisce consigli medici. Questa etichetta di triage Ã¨ fornita dall'utente ed Ã¨ solo di assistenza per i soccorritori.",
                qr_code: "Il Tuo Codice QR",
                qr_desc: "Portale di accesso di emergenza",
                generate_qr: "Genera Codice QR",
                qr_requirement: "Completa il tuo profilo per generare il codice QR",
                share_link: "Link di Condivisione",
                copy: "Copia",
                export_png: "Esporta PNG",
                print: "Stampa",
                danger_zone: "Zona di Pericolo",
                delete_warning: "Questa azione non puÃ² essere annullata. Questo eliminerÃ  permanentemente il tuo account e tutti i dati associati.",
                delete_account: "Elimina Account"
            },
            hi: {
                dashboard_title: "MYQER à¤¡à¥ˆà¤¶à¤¬à¥‹à¤°à¥à¤¡",
                version: "à¤¸à¤‚à¤¸à¥à¤•à¤°à¤£ 3.0 - à¤ªà¥à¤°à¥€à¤®à¤¿à¤¯à¤® à¤¸à¤‚à¤¸à¥à¤•à¤°à¤£",
                profile_completion: "à¤ªà¥à¤°à¥‹à¤«à¤¼à¤¾à¤‡à¤² à¤ªà¥‚à¤°à¥à¤£à¤¤à¤¾",
                complete_for_qr: "QR à¤ªà¤¹à¥à¤‚à¤š à¤•à¥‡ à¤²à¤¿à¤ à¤ªà¥‚à¤°à¤¾ à¤•à¤°à¥‡à¤‚",
                sign_out: "à¤¸à¤¾à¤‡à¤¨ à¤†à¤‰à¤Ÿ",
                identity_ice: "à¤ªà¤¹à¤šà¤¾à¤¨ à¤”à¤° à¤†à¤ªà¤¾à¤¤à¤•à¤¾à¤²à¥€à¤¨ à¤¸à¤‚à¤ªà¤°à¥à¤•",
                identity_desc: "à¤µà¥à¤¯à¤•à¥à¤¤à¤¿à¤—à¤¤ à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€ à¤”à¤° à¤†à¤ªà¤¾à¤¤à¤•à¤¾à¤²à¥€à¤¨ à¤¸à¤‚à¤ªà¤°à¥à¤•",
                full_name: "à¤ªà¥‚à¤°à¤¾ à¤¨à¤¾à¤®",
                enter_full_name: "à¤…à¤ªà¤¨à¤¾ à¤ªà¥‚à¤°à¤¾ à¤¨à¤¾à¤® à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚",
                date_of_birth: "à¤œà¤¨à¥à¤® à¤¤à¤¿à¤¥à¤¿",
                country: "à¤¦à¥‡à¤¶",
                select_country: "à¤¦à¥‡à¤¶ à¤šà¥à¤¨à¥‡à¤‚",
                health_id: "à¤°à¤¾à¤·à¥à¤Ÿà¥à¤°à¥€à¤¯ à¤¸à¥à¤µà¤¾à¤¸à¥à¤¥à¥à¤¯ à¤†à¤ˆà¤¡à¥€",
                enter_health_id: "à¤¸à¥à¤µà¤¾à¤¸à¥à¤¥à¥à¤¯ à¤†à¤ˆà¤¡à¥€ à¤¨à¤‚à¤¬à¤° à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚",
                ice_contacts: "ICE à¤¸à¤‚à¤ªà¤°à¥à¤•",
                ice_desc: "à¤†à¤ªà¤¾à¤¤à¤•à¤¾à¤² à¤•à¥€ à¤¸à¥à¤¥à¤¿à¤¤à¤¿ à¤®à¥‡à¤‚",
                add_contact: "+ à¤¸à¤‚à¤ªà¤°à¥à¤• à¤œà¥‹à¤¡à¤¼à¥‡à¤‚",
                health_info: "à¤¸à¥à¤µà¤¾à¤¸à¥à¤¥à¥à¤¯ à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€",
                health_desc: "à¤šà¤¿à¤•à¤¿à¤¤à¥à¤¸à¤¾ à¤µà¤¿à¤µà¤°à¤£ à¤”à¤° à¤¸à¥à¤¥à¤¿à¤¤à¤¿à¤¯à¤¾à¤‚",
                blood_type: "à¤°à¤•à¥à¤¤ à¤¸à¤®à¥‚à¤¹",
                select_blood_type: "à¤°à¤•à¥à¤¤ à¤¸à¤®à¥‚à¤¹ à¤šà¥à¤¨à¥‡à¤‚",
                organ_donor: "à¤…à¤‚à¤— à¤¦à¤¾à¤¤à¤¾",
                unspecified: "à¤…à¤¨à¤¿à¤°à¥à¤¦à¤¿à¤·à¥à¤Ÿ",
                yes: "à¤¹à¤¾à¤",
                no: "à¤¨à¤¹à¥€à¤‚",
                life_support: "à¤œà¥€à¤µà¤¨ à¤¸à¤®à¤°à¥à¤¥à¤¨ à¤ªà¥à¤°à¤¾à¤¥à¤®à¤¿à¤•à¤¤à¤¾",
                select_preference: "à¤ªà¥à¤°à¤¾à¤¥à¤®à¤¿à¤•à¤¤à¤¾ à¤šà¥à¤¨à¥‡à¤‚",
                full_support: "à¤ªà¥‚à¤°à¥à¤£ à¤¸à¤®à¤°à¥à¤¥à¤¨",
                limited_support: "à¤¸à¥€à¤®à¤¿à¤¤ à¤¸à¤®à¤°à¥à¤¥à¤¨",
                comfort_care: "à¤•à¥‡à¤µà¤² à¤†à¤°à¤¾à¤® à¤•à¥€ à¤¦à¥‡à¤–à¤­à¤¾à¤²",
                dnr: "à¤ªà¥à¤¨à¤°à¥à¤œà¥€à¤µà¤¿à¤¤ à¤¨ à¤•à¤°à¥‡à¤‚",
                allergies: "à¤à¤²à¤°à¥à¤œà¥€",
                type_allergy: "à¤à¤²à¤°à¥à¤œà¥€ à¤Ÿà¤¾à¤‡à¤ª à¤•à¤°à¥‡à¤‚ à¤”à¤° à¤à¤‚à¤Ÿà¤° à¤¦à¤¬à¤¾à¤à¤‚",
                conditions: "à¤šà¤¿à¤•à¤¿à¤¤à¥à¤¸à¤¾ à¤¸à¥à¤¥à¤¿à¤¤à¤¿à¤¯à¤¾à¤‚",
                type_condition: "à¤¸à¥à¤¥à¤¿à¤¤à¤¿ à¤Ÿà¤¾à¤‡à¤ª à¤•à¤°à¥‡à¤‚ à¤”à¤° à¤à¤‚à¤Ÿà¤° à¤¦à¤¬à¤¾à¤à¤‚",
                medications: "à¤¦à¤µà¤¾à¤à¤‚",
                type_medication: "à¤¦à¤µà¤¾ à¤Ÿà¤¾à¤‡à¤ª à¤•à¤°à¥‡à¤‚ à¤”à¤° à¤à¤‚à¤Ÿà¤° à¤¦à¤¬à¤¾à¤à¤‚",
                triage_priority: "à¤Ÿà¥à¤°à¤¾à¤‡à¤à¤œ à¤ªà¥à¤°à¤¾à¤¥à¤®à¤¿à¤•à¤¤à¤¾",
                auto: "à¤¸à¥à¤µà¤šà¤¾à¤²à¤¿à¤¤",
                not_assessed: "à¤®à¥‚à¤²à¥à¤¯à¤¾à¤‚à¤•à¤¨ à¤¨à¤¹à¥€à¤‚",
                disclaimer: "à¤…à¤¸à¥à¤µà¥€à¤•à¤°à¤£:",
                disclaimer_text: "MYQER à¤¨à¤¿à¤¦à¤¾à¤¨ à¤¨à¤¹à¥€à¤‚ à¤•à¤°à¤¤à¤¾ à¤¯à¤¾ à¤šà¤¿à¤•à¤¿à¤¤à¥à¤¸à¤¾ à¤¸à¤²à¤¾à¤¹ à¤ªà¥à¤°à¤¦à¤¾à¤¨ à¤¨à¤¹à¥€à¤‚ à¤•à¤°à¤¤à¤¾à¥¤ à¤¯à¤¹ à¤Ÿà¥à¤°à¤¾à¤‡à¤à¤œ à¤²à¥‡à¤¬à¤² à¤‰à¤ªà¤¯à¥‹à¤—à¤•à¤°à¥à¤¤à¤¾ à¤¦à¥à¤µà¤¾à¤°à¤¾ à¤ªà¥à¤°à¤¦à¤¾à¤¨ à¤•à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾ à¤¹à¥ˆ à¤”à¤° à¤•à¥‡à¤µà¤² à¤ªà¥à¤°à¤¤à¤¿à¤•à¥à¤°à¤¿à¤¯à¤¾à¤•à¤°à¥à¤¤à¤¾à¤“à¤‚ à¤•à¥‡ à¤²à¤¿à¤ à¤¸à¤¹à¤¾à¤¯à¤• à¤¹à¥ˆà¥¤",
                qr_code: "à¤†à¤ªà¤•à¤¾ QR à¤•à¥‹à¤¡",
                qr_desc: "à¤†à¤ªà¤¾à¤¤à¤•à¤¾à¤²à¥€à¤¨ à¤ªà¤¹à¥à¤‚à¤š à¤ªà¥‹à¤°à¥à¤Ÿà¤²",
                generate_qr: "QR à¤•à¥‹à¤¡ à¤œà¥‡à¤¨à¤°à¥‡à¤Ÿ à¤•à¤°à¥‡à¤‚",
                qr_requirement: "QR à¤•à¥‹à¤¡ à¤œà¥‡à¤¨à¤°à¥‡à¤Ÿ à¤•à¤°à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤…à¤ªà¤¨à¥€ à¤ªà¥à¤°à¥‹à¤«à¤¼à¤¾à¤‡à¤² à¤ªà¥‚à¤°à¥€ à¤•à¤°à¥‡à¤‚",
                share_link: "à¤¸à¤¾à¤à¤¾ à¤²à¤¿à¤‚à¤•",
                copy: "à¤•à¥‰à¤ªà¥€",
                export_png: "PNG à¤¨à¤¿à¤°à¥à¤¯à¤¾à¤¤",
                print: "à¤ªà¥à¤°à¤¿à¤‚à¤Ÿ",
                danger_zone: "à¤–à¤¤à¤°à¤¾ à¤•à¥à¤·à¥‡à¤¤à¥à¤°",
                delete_warning: "à¤¯à¤¹ à¤•à¥à¤°à¤¿à¤¯à¤¾ à¤ªà¥‚à¤°à¥à¤µà¤µà¤¤ à¤¨à¤¹à¥€à¤‚ à¤•à¥€ à¤œà¤¾ à¤¸à¤•à¤¤à¥€à¥¤ à¤¯à¤¹ à¤†à¤ªà¤•à¥‡ à¤–à¤¾à¤¤à¥‡ à¤”à¤° à¤¸à¤­à¥€ à¤¸à¤‚à¤¬à¤‚à¤§à¤¿à¤¤ à¤¡à¥‡à¤Ÿà¤¾ à¤•à¥‹ à¤¸à¥à¤¥à¤¾à¤¯à¥€ à¤°à¥‚à¤ª à¤¸à¥‡ à¤¹à¤Ÿà¤¾ à¤¦à¥‡à¤—à¤¾à¥¤",
                delete_account: "à¤–à¤¾à¤¤à¤¾ à¤¹à¤Ÿà¤¾à¤à¤‚"
            },
            ar: {
                dashboard_title: "Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… MYQER",
                version: "Ø§Ù„Ø¥ØµØ¯Ø§Ø± 3.0 - Ø§Ù„Ø·Ø¨Ø¹Ø© Ø§Ù„Ù…Ù…ÙŠØ²Ø©",
                profile_completion: "Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ",
                complete_for_qr: "Ø£ÙƒÙ…Ù„ Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ QR",
                sign_out: "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬",
                identity_ice: "Ø§Ù„Ù‡ÙˆÙŠØ© ÙˆØ¬Ù‡Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø·Ø§Ø±Ø¦Ø©",
                identity_desc: "Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ© ÙˆØ¬Ù‡Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø·Ø§Ø±Ø¦Ø©",
                full_name: "Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„",
                enter_full_name: "Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„",
                date_of_birth: "ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯",
                country: "Ø§Ù„Ø¨Ù„Ø¯",
                select_country: "Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù„Ø¯",
                health_id: "Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„ØµØ­ÙŠØ© Ø§Ù„ÙˆØ·Ù†ÙŠØ©",
                enter_health_id: "Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„ØµØ­ÙŠØ©",
                ice_contacts: "Ø¬Ù‡Ø§Øª Ø§ØªØµØ§Ù„ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦",
                ice_desc: "ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ø·ÙˆØ§Ø±Ø¦",
                add_contact: "+ Ø¥Ø¶Ø§ÙØ© Ø¬Ù‡Ø© Ø§ØªØµØ§Ù„",
                health_info: "Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØµØ­ÙŠØ©",
                health_desc: "Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ø¨ÙŠØ© ÙˆØ§Ù„Ø­Ø§Ù„Ø§Øª",
                blood_type: "ÙØµÙŠÙ„Ø© Ø§Ù„Ø¯Ù…",
                select_blood_type: "Ø§Ø®ØªØ± ÙØµÙŠÙ„Ø© Ø§Ù„Ø¯Ù…",
                organ_donor: "Ù…ØªØ¨Ø±Ø¹ Ø¨Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡",
                unspecified: "ØºÙŠØ± Ù…Ø­Ø¯Ø¯",
                yes: "Ù†Ø¹Ù…",
                no: "Ù„Ø§",
                life_support: "ØªÙØ¶ÙŠÙ„ Ø¯Ø¹Ù… Ø§Ù„Ø­ÙŠØ§Ø©",
                select_preference: "Ø§Ø®ØªØ± Ø§Ù„ØªÙØ¶ÙŠÙ„",
                full_support: "Ø¯Ø¹Ù… ÙƒØ§Ù…Ù„",
                limited_support: "Ø¯Ø¹Ù… Ù…Ø­Ø¯ÙˆØ¯",
                comfort_care: "Ø±Ø¹Ø§ÙŠØ© Ù…Ø±ÙŠØ­Ø© ÙÙ‚Ø·",
                dnr: "Ø¹Ø¯Ù… Ø§Ù„Ø¥Ù†Ø¹Ø§Ø´",
                allergies: "Ø§Ù„Ø­Ø³Ø§Ø³ÙŠØ©",
                type_allergy: "Ø§ÙƒØªØ¨ Ø§Ù„Ø­Ø³Ø§Ø³ÙŠØ© ÙˆØ§Ø¶ØºØ· Ø¥Ø¯Ø®Ø§Ù„",
                conditions: "Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ©",
                type_condition: "Ø§ÙƒØªØ¨ Ø§Ù„Ø­Ø§Ù„Ø© ÙˆØ§Ø¶ØºØ· Ø¥Ø¯Ø®Ø§Ù„",
                medications: "Ø§Ù„Ø£Ø¯ÙˆÙŠØ©",
                type_medication: "Ø§ÙƒØªØ¨ Ø§Ù„Ø¯ÙˆØ§Ø¡ ÙˆØ§Ø¶ØºØ· Ø¥Ø¯Ø®Ø§Ù„",
                triage_priority: "Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„ÙØ±Ø²",
                auto: "ØªÙ„Ù‚Ø§Ø¦ÙŠ",
                not_assessed: "ØºÙŠØ± Ù…Ù‚ÙŠÙ…",
                disclaimer: "Ø¥Ø®Ù„Ø§Ø¡ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©:",
                disclaimer_text: "MYQER Ù„Ø§ ÙŠØ´Ø®Øµ Ø£Ùˆ ÙŠÙ‚Ø¯Ù… Ù†ØµØ§Ø¦Ø­ Ø·Ø¨ÙŠØ©. Ù‡Ø°Ù‡ Ø§Ù„ØªØ³Ù…ÙŠØ© Ù„Ù„ÙØ±Ø² Ù…Ù‚Ø¯Ù…Ø© Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙ…Ø³Ø§Ø¹Ø¯Ø© ÙÙ‚Ø· Ù„Ù„Ù…Ø³ØªØ¬ÙŠØ¨ÙŠÙ†.",
                qr_code: "Ø±Ù…Ø² QR Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ",
                qr_desc: "Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø·Ø§Ø±Ø¦",
                generate_qr: "Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù…Ø² QR",
                qr_requirement: "Ø£ÙƒÙ…Ù„ Ù…Ù„ÙÙƒ Ø§Ù„Ø´Ø®ØµÙŠ Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù…Ø² QR",
                share_link: "Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©",
                copy: "Ù†Ø³Ø®",
                export_png: "ØªØµØ¯ÙŠØ± PNG",
                print: "Ø·Ø¨Ø§Ø¹Ø©",
                danger_zone: "Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø®Ø·Ø±",
                delete_warning: "Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡. Ø³ÙŠØ¤Ø¯ÙŠ Ù‡Ø°Ø§ Ø¥Ù„Ù‰ Ø­Ø°Ù Ø­Ø³Ø§Ø¨Ùƒ ÙˆØ¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹.",
                delete_account: "Ø­Ø°Ù Ø§Ù„Ø­Ø³Ø§Ø¨"
            },
            zh: {
                dashboard_title: "MYQER ä»ªè¡¨æ¿",
                version: "ç‰ˆæœ¬ 3.0 - é«˜çº§ç‰ˆ",
                profile_completion: "ä¸ªäººèµ„æ–™å®Œæˆåº¦",
                complete_for_qr: "å®Œæˆä»¥è·å–äºŒç»´ç è®¿é—®",
                sign_out: "é€€å‡ºç™»å½•",
                identity_ice: "èº«ä»½å’Œç´§æ€¥è”ç³»äºº",
                identity_desc: "ä¸ªäººä¿¡æ¯å’Œç´§æ€¥è”ç³»äºº",
                full_name: "å…¨å",
                enter_full_name: "è¾“å…¥æ‚¨çš„å…¨å",
                date_of_birth: "å‡ºç”Ÿæ—¥æœŸ",
                country: "å›½å®¶",
                select_country: "é€‰æ‹©å›½å®¶",
                health_id: "å›½æ°‘å¥åº·ID",
                enter_health_id: "è¾“å…¥å¥åº·IDå·ç ",
                ice_contacts: "ç´§æ€¥è”ç³»äºº",
                ice_desc: "ç´§æ€¥æƒ…å†µä¸‹",
                add_contact: "+ æ·»åŠ è”ç³»äºº",
                health_info: "å¥åº·ä¿¡æ¯",
                health_desc: "åŒ»ç–—è¯¦æƒ…å’ŒçŠ¶å†µ",
                blood_type: "è¡€å‹",
                select_blood_type: "é€‰æ‹©è¡€å‹",
                organ_donor: "å™¨å®˜æçŒ®è€…",
                unspecified: "æœªæŒ‡å®š",
                yes: "æ˜¯",
                no: "å¦",
                life_support: "ç”Ÿå‘½æ”¯æŒåå¥½",
                select_preference: "é€‰æ‹©åå¥½",
                full_support: "å®Œå…¨æ”¯æŒ",
                limited_support: "æœ‰é™æ”¯æŒ",
                comfort_care: "ä»…èˆ’é€‚æŠ¤ç†",
                dnr: "ä¸è¦å¤è‹",
                allergies: "è¿‡æ•",
                type_allergy: "è¾“å…¥è¿‡æ•å¹¶æŒ‰å›è½¦",
                conditions: "ç–¾ç—…çŠ¶å†µ",
                type_condition: "è¾“å…¥çŠ¶å†µå¹¶æŒ‰å›è½¦",
                medications: "è¯ç‰©",
                type_medication: "è¾“å…¥è¯ç‰©å¹¶æŒ‰å›è½¦",
                triage_priority: "åˆ†è¯Šä¼˜å…ˆçº§",
                auto: "è‡ªåŠ¨",
                not_assessed: "æœªè¯„ä¼°",
                disclaimer: "å…è´£å£°æ˜ï¼š",
                disclaimer_text: "MYQERä¸è¿›è¡Œè¯Šæ–­æˆ–æä¾›åŒ»ç–—å»ºè®®ã€‚æ­¤åˆ†è¯Šæ ‡ç­¾ç”±ç”¨æˆ·æä¾›ï¼Œä»…ä¾›æ€¥æ•‘äººå‘˜å‚è€ƒã€‚",
                qr_code: "æ‚¨çš„äºŒç»´ç ",
                qr_desc: "ç´§æ€¥è®¿é—®é—¨æˆ·",
                generate_qr: "ç”ŸæˆäºŒç»´ç ",
                qr_requirement: "å®Œæˆæ‚¨çš„ä¸ªäººèµ„æ–™ä»¥ç”ŸæˆäºŒç»´ç ",
                share_link: "åˆ†äº«é“¾æ¥",
                copy: "å¤åˆ¶",
                export_png: "å¯¼å‡ºPNG",
                print: "æ‰“å°",
                danger_zone: "å±é™©åŒºåŸŸ",
                delete_warning: "æ­¤æ“ä½œæ— æ³•æ’¤é”€ã€‚è¿™å°†æ°¸ä¹…åˆ é™¤æ‚¨çš„è´¦æˆ·å’Œæ‰€æœ‰ç›¸å…³æ•°æ®ã€‚",
                delete_account: "åˆ é™¤è´¦æˆ·"
            },
            hu: {
                dashboard_title: "MYQER IrÃ¡nyÃ­tÃ³pult",
                version: "3.0 verziÃ³ - PrÃ©mium kiadÃ¡s",
                profile_completion: "Profil BefejezÃ©s",
                complete_for_qr: "Fejezze be a QR hozzÃ¡fÃ©rÃ©shez",
                sign_out: "KijelentkezÃ©s",
                identity_ice: "SzemÃ©lyazonossÃ¡g Ã©s VÃ©szhelyzeti Kapcsolatok",
                identity_desc: "SzemÃ©lyes informÃ¡ciÃ³k Ã©s vÃ©szhelyzeti kapcsolatok",
                full_name: "Teljes NÃ©v",
                enter_full_name: "Adja meg teljes nevÃ©t",
                date_of_birth: "SzÃ¼letÃ©si DÃ¡tum",
                country: "OrszÃ¡g",
                select_country: "VÃ¡lasszon OrszÃ¡got",
                health_id: "Nemzeti EgÃ©szsÃ©gÃ¼gyi AzonosÃ­tÃ³",
                enter_health_id: "Adja meg az egÃ©szsÃ©gÃ¼gyi azonosÃ­tÃ³ szÃ¡mot",
                ice_contacts: "ICE Kapcsolatok",
                ice_desc: "VÃ©szhelyzet EsetÃ©n",
                add_contact: "+ Kapcsolat HozzÃ¡adÃ¡sa",
                health_info: "EgÃ©szsÃ©gÃ¼gyi InformÃ¡ciÃ³k",
                health_desc: "Orvosi rÃ©szletek Ã©s Ã¡llapotok",
                blood_type: "VÃ©rcsoport",
                select_blood_type: "VÃ¡lasszon VÃ©rcsoportot",
                organ_donor: "Szervdonor",
                unspecified: "Nem MeghatÃ¡rozott",
                yes: "Igen",
                no: "Nem",
                life_support: "Ã‰letfenntartÃ³ Preferencia",
                select_preference: "VÃ¡lasszon PreferenciÃ¡t",
                full_support: "Teljes TÃ¡mogatÃ¡s",
                limited_support: "KorlÃ¡tozott TÃ¡mogatÃ¡s",
                comfort_care: "Csak PalliatÃ­v GondozÃ¡s",
                dnr: "Ne Ã‰leszd Ãšjra",
                allergies: "AllergiÃ¡k",
                type_allergy: "Ãrja be az allergiÃ¡t Ã©s nyomja meg az Entert",
                conditions: "EgÃ©szsÃ©gÃ¼gyi Ãllapotok",
                type_condition: "Ãrja be az Ã¡llapotot Ã©s nyomja meg az Entert",
                medications: "GyÃ³gyszerek",
                type_medication: "Ãrja be a gyÃ³gyszert Ã©s nyomja meg az Entert",
                triage_priority: "TriÃ¡zs PrioritÃ¡s",
                auto: "Automatikus",
                not_assessed: "Nem Ã‰rtÃ©kelt",
                disclaimer: "Jogi Nyilatkozat:",
                disclaimer_text: "A MYQER nem diagnosztizÃ¡l Ã©s nem nyÃºjt orvosi tanÃ¡csot. Ez a triÃ¡zs cÃ­mke felhasznÃ¡lÃ³ Ã¡ltal megadott Ã©s csak segÃ­tÅ‘ a mentÅ‘sÃ¶knek.",
                qr_code: "Az Ã–n QR KÃ³dja",
                qr_desc: "VÃ©szhelyzeti hozzÃ¡fÃ©rÃ©si portÃ¡l",
                generate_qr: "QR KÃ³d GenerÃ¡lÃ¡sa",
                qr_requirement: "Fejezze be profiljÃ¡t a QR kÃ³d generÃ¡lÃ¡sÃ¡hoz",
                share_link: "MegosztÃ¡si Link",
                copy: "MÃ¡solÃ¡s",
                export_png: "PNG ExportÃ¡lÃ¡s",
                print: "NyomtatÃ¡s",
                danger_zone: "VeszÃ©lyzÃ³na",
                delete_warning: "Ez a mÅ±velet nem vonhatÃ³ vissza. Ez vÃ©glegesen tÃ¶rli fiÃ³kjÃ¡t Ã©s minden kapcsolÃ³dÃ³ adatot.",
                delete_account: "FiÃ³k TÃ¶rlÃ©se"
            },
            ro: {
                dashboard_title: "Tablou de Bord MYQER",
                version: "Versiunea 3.0 - EdiÈ›ia Premium",
                profile_completion: "Completarea Profilului",
                complete_for_qr: "CompletaÈ›i pentru accesul QR",
                sign_out: "Deconectare",
                identity_ice: "Identitate È™i Contacte de UrgenÈ›Äƒ",
                identity_desc: "InformaÈ›ii personale È™i contacte de urgenÈ›Äƒ",
                full_name: "Nume Complet",
                enter_full_name: "IntroduceÈ›i numele complet",
                date_of_birth: "Data NaÈ™terii",
                country: "Èšara",
                select_country: "SelectaÈ›i Èšara",
                health_id: "ID SÄƒnÄƒtate NaÈ›ionalÄƒ",
                enter_health_id: "IntroduceÈ›i numÄƒrul ID sÄƒnÄƒtate",
                ice_contacts: "Contacte ICE",
                ice_desc: "Ãn Caz de UrgenÈ›Äƒ",
                add_contact: "+ AdÄƒugaÈ›i Contact",
                health_info: "InformaÈ›ii SÄƒnÄƒtate",
                health_desc: "Detalii medicale È™i condiÈ›ii",
                blood_type: "Grupa SanguinÄƒ",
                select_blood_type: "SelectaÈ›i Grupa SanguinÄƒ",
                organ_donor: "Donator de Organe",
                unspecified: "Nespecificat",
                yes: "Da",
                no: "Nu",
                life_support: "PreferinÈ›a Suport Vital",
                select_preference: "SelectaÈ›i PreferinÈ›a",
                full_support: "Suport Complet",
                limited_support: "Suport Limitat",
                comfort_care: "Doar Ãngrijire PaliativÄƒ",
                dnr: "Nu Resuscita",
                allergies: "Alergii",
                type_allergy: "TastaÈ›i alergia È™i apÄƒsaÈ›i Enter",
                conditions: "CondiÈ›ii Medicale",
                type_condition: "TastaÈ›i condiÈ›ia È™i apÄƒsaÈ›i Enter",
                medications: "Medicamente",
                type_medication: "TastaÈ›i medicamentul È™i apÄƒsaÈ›i Enter",
                triage_priority: "Prioritate Triaj",
                auto: "Automat",
                not_assessed: "Neevaluat",
                disclaimer: "Declinarea ResponsabilitÄƒÈ›ii:",
                disclaimer_text: "MYQER nu diagnosticheazÄƒ È™i nu oferÄƒ sfaturi medicale. AceastÄƒ etichetÄƒ de triaj este furnizatÄƒ de utilizator È™i este doar de asistenÈ›Äƒ pentru salvatori.",
                qr_code: "Codul Dvs. QR",
                qr_desc: "Portal de acces de urgenÈ›Äƒ",
                generate_qr: "GeneraÈ›i Cod QR",
                qr_requirement: "CompletaÈ›i-vÄƒ profilul pentru a genera codul QR",
                share_link: "Link Partajare",
                copy: "CopiaÈ›i",
                export_png: "ExportaÈ›i PNG",
                print: "ImprimaÈ›i",
                danger_zone: "Zona de Pericol",
                delete_warning: "AceastÄƒ acÈ›iune nu poate fi anulatÄƒ. Aceasta va È™terge permanent contul dvs. È™i toate datele asociate.",
                delete_account: "È˜tergeÈ›i Contul"
            }
        };

        // Language Management
        function changeLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('myqer_language', lang);
            
            // Set RTL for Arabic
            if (lang === 'ar') {
                document.documentElement.setAttribute('dir', 'rtl');
                document.documentElement.setAttribute('lang', 'ar');
            } else {
                document.documentElement.setAttribute('dir', 'ltr');
                document.documentElement.setAttribute('lang', lang);
            }
            
            // Update all translatable elements
            const elements = document.querySelectorAll('[data-translate]');
            elements.forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[lang] && translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });
            
            // Update placeholders
            const placeholderElements = document.querySelectorAll('[data-translate-placeholder]');
            placeholderElements.forEach(element => {
                const key = element.getAttribute('data-translate-placeholder');
                if (translations[lang] && translations[lang][key]) {
                    element.placeholder = translations[lang][key];
                }
            });
        }

        // Toast System
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            const colors = {
                success: 'bg-gradient-to-r from-green-500 to-green-600',
                error: 'bg-gradient-to-r from-red-500 to-red-600',
                info: 'bg-gradient-to-r from-blue-500 to-blue-600',
                warning: 'bg-gradient-to-r from-amber-500 to-amber-600'
            };
            
            toast.className = `${colors[type]} text-white px-6 py-4 rounded-2xl shadow-2xl transform transition-all duration-500 translate-x-full opacity-0 font-semibold`;
            toast.textContent = message;
            
            document.getElementById('toast-container').appendChild(toast);
            
            setTimeout(() => {
                toast.classList.remove('translate-x-full', 'opacity-0');
            }, 100);
            
            setTimeout(() => {
                toast.classList.add('translate-x-full', 'opacity-0');
                setTimeout(() => toast.remove(), 500);
            }, 4000);
        }

        // Session Management
        async function checkSession() {
            const { data: { session } } = await supabase.auth.getSession();
            if (!session) {
                location.href = '/index.html';
                return;
            }
            currentUser = session.user;
            await loadUserData();
        }

        async function signOut() {
            await supabase.auth.signOut();
            location.href = '/index.html';
        }

        // Debounced Save
        function debouncedSave(field, value, table = 'profiles') {
            clearTimeout(debounceTimers[field]);
            debounceTimers[field] = setTimeout(async () => {
                await saveField(field, value, table);
            }, 700);
        }

        async function saveField(field, value, table) {
            try {
                if (table === 'profiles') {
                    const { error } = await supabase
                        .from('profiles')
                        .upsert({ 
                            id: currentUser.id, 
                            email: currentUser.email,
                            [field]: value,
                            updated_at: new Date().toISOString()
                        });
                    if (error) throw error;
                } else if (table === 'health_profiles') {
                    const { error } = await supabase
                        .from('health_profiles')
                        .upsert({ 
                            user_id: currentUser.id, 
                            [field]: value 
                        });
                    if (error) throw error;
                }
                updateCompletion();
                showToast('Saved successfully', 'success');
            } catch (error) {
                showToast('Save failed: ' + error.message, 'error');
            }
        }

        // Load User Data
        async function loadUserData() {
            try {
                // Load profile
                const { data: profile } = await supabase
                    .from('profiles')
                    .select('*')
                    .eq('id', currentUser.id)
                    .single();

                if (profile) {
                    document.getElementById('full_name').value = profile.full_name || '';
                    document.getElementById('date_of_birth').value = profile.date_of_birth || '';
                    document.getElementById('country').value = profile.country || '';
                    document.getElementById('national_health_id').value = profile.national_health_id || '';
                    
                    if (profile.code) {
                        showQRCode(profile.code);
                    }
                }

                // Load health profile
                const { data: health } = await supabase
                    .from('health_profiles')
                    .select('*')
                    .eq('user_id', currentUser.id)
                    .single();

                if (health) {
                    document.getElementById('blood_type').value = health.blood_type || '';
                    document.getElementById('organ_donor').value = health.organ_donor || '';
                    document.getElementById('life_support_pref').value = health.life_support_pref || '';
                    document.getElementById('triage_override').value = health.triage_override || 'Auto';
                    
                    allergies = health.allergies ? health.allergies.split(',').filter(a => a.trim()) : [];
                    conditions = health.conditions ? health.conditions.split(',').filter(c => c.trim()) : [];
                    medications = health.medications ? health.medications.split(',').filter(m => m.trim()) : [];
                    
                    renderPills();
                    updateTriageBadge();
                }

                // Load ICE contacts
                const { data: contactsData } = await supabase
                    .from('ice_contacts')
                    .select('*')
                    .eq('user_id', currentUser.id)
                    .order('created_at');

                contacts = contactsData || [];
                renderContacts();
                updateCompletion();
            } catch (error) {
                showToast('Failed to load data: ' + error.message, 'error');
            }
        }

        // Pills Management
        function renderPills() {
            renderPillGroup('allergies', allergies);
            renderPillGroup('conditions', conditions);
            renderPillGroup('medications', medications);
        }

        function renderPillGroup(type, items) {
            const container = document.getElementById(`${type}-pills`);
            const colors = {
                allergies: 'bg-red-100 text-red-800 border-red-200',
                conditions: 'bg-orange-100 text-orange-800 border-orange-200',
                medications: 'bg-blue-100 text-blue-800 border-blue-200'
            };
            
            container.innerHTML = items.map(item => 
                `<span class="inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold border-2 ${colors[type]} shadow-sm">
                    ${item}
                    <button onclick="removePill('${type}', '${item}')" class="ml-3 text-current hover:text-red-600 font-bold text-lg transition-colors">Ã—</button>
                </span>`
            ).join('');
        }

        function addPill(type, value) {
            if (!value.trim()) return;
            
            const items = type === 'allergies' ? allergies : 
                         type === 'conditions' ? conditions : medications;
            
            if (!items.includes(value.trim())) {
                items.push(value.trim());
                renderPills();
                savePills();
                updateTriageBadge();
            }
        }

        function removePill(type, value) {
            const items = type === 'allergies' ? allergies : 
                         type === 'conditions' ? conditions : medications;
            
            const index = items.indexOf(value);
            if (index > -1) {
                items.splice(index, 1);
                renderPills();
                savePills();
                updateTriageBadge();
            }
        }

        async function savePills() {
            try {
                const { error } = await supabase
                    .from('health_profiles')
                    .upsert({
                        user_id: currentUser.id,
                        allergies: allergies.join(','),
                        conditions: conditions.join(','),
                        medications: medications.join(',')
                    });
                if (error) throw error;
                updateCompletion();
            } catch (error) {
                showToast('Failed to save: ' + error.message, 'error');
            }
        }

        // Triage Badge
        function updateTriageBadge() {
            const override = document.getElementById('triage_override').value;
            let priority = 'Green';
            let color = 'bg-green-100 text-green-800 border-green-300';
            let dotColor = 'bg-green-500';

            if (override !== 'Auto') {
                priority = override;
            } else {
                // Auto calculation
                const lifeSupportPref = document.getElementById('life_support_pref').value;
                
                if (lifeSupportPref === 'DNR') {
                    priority = 'Black';
                } else {
                    const criticalAllergies = ['anaphylaxis', 'epipen', 'penicillin', 'peanut', 'shellfish'];
                    const criticalConditions = ['heart', 'stroke', 'seizure', 'cancer'];
                    
                    const hasCriticalAllergy = allergies.some(a => 
                        criticalAllergies.some(ca => a.toLowerCase().includes(ca))
                    );
                    const hasCriticalCondition = conditions.some(c => 
                        criticalConditions.some(cc => c.toLowerCase().includes(cc))
                    );
                    const hasMultipleIssues = (conditions.length + medications.length) >= 3;
                    
                    if (hasCriticalAllergy || hasCriticalCondition || hasMultipleIssues) {
                        priority = 'Red';
                    } else if (allergies.length > 0 || conditions.length > 0 || medications.length > 0) {
                        priority = 'Amber';
                    }
                }
            }

            // Set colors
            switch (priority) {
                case 'Black':
                    color = 'bg-gray-800 text-white border-gray-600';
                    dotColor = 'bg-gray-600';
                    break;
                case 'Red':
                    color = 'bg-red-100 text-red-800 border-red-300';
                    dotColor = 'bg-red-500';
                    break;
                case 'Amber':
                    color = 'bg-amber-100 text-amber-800 border-amber-300';
                    dotColor = 'bg-amber-500';
                    break;
                default:
                    color = 'bg-green-100 text-green-800 border-green-300';
                    dotColor = 'bg-green-500';
            }

            document.getElementById('triage-badge').className = 
                `inline-flex items-center px-4 py-2 rounded-full text-sm font-bold border-2 ${color} shadow-lg`;
            document.getElementById('triage-badge').innerHTML = 
                `<span class="w-3 h-3 rounded-full mr-3 ${dotColor}"></span>${priority}`;
        }

        // ICE Contacts - Enhanced
        function renderContacts() {
            const container = document.getElementById('contacts-list');
            const count = document.getElementById('contact-count');
            const addBtn = document.getElementById('add-contact-btn');
            
            count.textContent = `${contacts.length} of 3`;
            addBtn.disabled = contacts.length >= 3;
            addBtn.className = contacts.length >= 3 ? 
                'bg-gray-400 text-white px-4 py-2 rounded-xl cursor-not-allowed font-semibold text-sm' :
                'medical-btn bg-gradient-to-r from-red-500 to-red-600 text-white px-4 py-2 rounded-xl hover:from-red-600 hover:to-red-700 font-semibold text-sm shadow-lg';

            container.innerHTML = contacts.map((contact, index) => `
                <div class="ice-contact-card rounded-2xl p-6 space-y-4">
                    <div class="flex justify-between items-center mb-4">
                        <h4 class="text-lg font-bold text-red-700">Contact ${index + 1}</h4>
                        <button onclick="deleteContact('${contact.id}')" 
                                class="medical-btn bg-red-600 text-white px-3 py-1 rounded-lg text-xs hover:bg-red-700 font-semibold">
                            ğŸ—‘ï¸ Delete
                        </button>
                    </div>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">Name *</label>
                            <input type="text" value="${contact.name || ''}" 
                                   onblur="updateContact('${contact.id}', 'name', this.value)"
                                   class="medical-input w-full px-4 py-3 rounded-xl outline-none text-lg"
                                   placeholder="Full name">
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">Relationship</label>
                            <input type="text" value="${contact.relationship || ''}" 
                                   onblur="updateContact('${contact.id}', 'relationship', this.value)"
                                   class="medical-input w-full px-4 py-3 rounded-xl outline-none text-lg"
                                   placeholder="e.g., Spouse, Parent, Friend">
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">Phone *</label>
                            <input type="tel" value="${contact.phone || ''}" 
                                   onblur="updateContact('${contact.id}', 'phone', this.value)"
                                   class="medical-input w-full px-4 py-3 rounded-xl outline-none text-lg"
                                   placeholder="+1 (555) 123-4567">
                        </div>
                    </div>
                </div>
            `).join('');
        }

        async function addContact() {
            if (contacts.length >= 3) {
                showToast('Maximum 3 contacts allowed', 'warning');
                return;
            }

            try {
                const { data, error } = await supabase
                    .from('ice_contacts')
                    .insert({ user_id: currentUser.id })
                    .select()
                    .single();

                if (error) throw error;
                contacts.push(data);
                renderContacts();
                updateCompletion();
                showToast('Contact added successfully', 'success');
            } catch (error) {
                showToast('Failed to add contact: ' + error.message, 'error');
            }
        }

        async function updateContact(id, field, value) {
            try {
                const { error } = await supabase
                    .from('ice_contacts')
                    .update({ [field]: value })
                    .eq('id', id);

                if (error) throw error;
                
                const contact = contacts.find(c => c.id === id);
                if (contact) contact[field] = value;
                
                updateCompletion();
                showToast('Contact updated', 'success');
            } catch (error) {
                showToast('Failed to update contact: ' + error.message, 'error');
            }
        }

        async function deleteContact(id) {
            if (!confirm('Are you sure you want to delete this contact?')) return;
            
            try {
                const { error } = await supabase
                    .from('ice_contacts')
                    .delete()
                    .eq('id', id);

                if (error) throw error;
                
                contacts = contacts.filter(c => c.id !== id);
                renderContacts();
                updateCompletion();
                showToast('Contact deleted successfully', 'success');
            } catch (error) {
                showToast('Failed to delete contact: ' + error.message, 'error');
            }
        }

        // QR Code Generation
        async function generateQRCode() {
            try {
                // Check if user already has a code
                const { data: profile } = await supabase
                    .from('profiles')
                    .select('code')
                    .eq('id', currentUser.id)
                    .single();

                if (profile && profile.code) {
                    showToast('Code already assigned', 'info');
                    showQRCode(profile.code);
                    return;
                }

                // Generate unique 6-character code
                let code;
                let isUnique = false;
                
                while (!isUnique) {
                    code = Math.random().toString(36).substring(2, 8).toUpperCase();
                    const { data } = await supabase
                        .from('profiles')
                        .select('id')
                        .eq('code', code)
                        .single();
                    
                    isUnique = !data;
                }

                // Save code to profile
                const { error } = await supabase
                    .from('profiles')
                    .update({ 
                        code,
                        updated_at: new Date().toISOString()
                    })
                    .eq('id', currentUser.id);

                if (error) throw error;

                showQRCode(code);
                updateCompletion();
                showToast('QR Code generated successfully! ğŸ‰', 'success');
            } catch (error) {
                showToast('Failed to generate QR code: ' + error.message, 'error');
            }
        }

        function showQRCode(code) {
            const url = `${location.origin}/c/${code}`;
            const canvas = document.getElementById('qr-canvas');
            
            QRCode.toCanvas(canvas, url, { 
                width: 200,
                margin: 2,
                color: {
                    dark: '#1f2937',
                    light: '#ffffff'
                }
            }, (error) => {
                if (error) {
                    showToast('Failed to generate QR code', 'error');
                    return;
                }
                
                document.getElementById('qr-section').classList.add('hidden');
                document.getElementById('qr-display').classList.remove('hidden');
                document.getElementById('share-link').value = url;
            });
        }

        function copyLink() {
            const link = document.getElementById('share-link');
            link.select();
            document.execCommand('copy');
            showToast('Link copied to clipboard! ğŸ“‹', 'success');
        }

        function exportPNG() {
            const canvas = document.getElementById('qr-canvas');
            const link = document.createElement('a');
            link.download = 'myqer-qr-code.png';
            link.href = canvas.toDataURL();
            link.click();
            showToast('QR Code exported successfully! ğŸ’¾', 'success');
        }

        function printQR() {
            const canvas = document.getElementById('qr-canvas');
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                    <head>
                        <title>MYQER QR Code</title>
                        <style>
                            body { text-align: center; padding: 40px; font-family: 'Inter', sans-serif; }
                            h2 { color: #1f2937; margin-bottom: 30px; }
                            img { max-width: 300px; border: 4px solid #e5e7eb; border-radius: 16px; }
                            p { color: #6b7280; margin-top: 20px; }
                        </style>
                    </head>
                    <body>
                        <h2>ğŸ¥ MYQER Emergency Profile</h2>
                        <img src="${canvas.toDataURL()}" alt="MYQER QR Code">
                        <p>ğŸ“± Scan to access emergency information</p>
                    </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
            showToast('Print dialog opened! ğŸ–¨ï¸', 'info');
        }

        // Profile Completion
        function updateCompletion() {
            let completed = 0;
            
            // Identity check (25%)
            const fullName = document.getElementById('full_name').value;
            const dob = document.getElementById('date_of_birth').value;
            if (fullName && dob) completed++;
            
            // Health check (25%)
            const bloodType = document.getElementById('blood_type').value;
            if (bloodType || allergies.length > 0 || conditions.length > 0 || medications.length > 0) completed++;
            
            // Contacts check (25%)
            if (contacts.length > 0) completed++;
            
            // QR Code check (25%)
            if (!document.getElementById('qr-display').classList.contains('hidden')) completed++;
            
            const percentage = (completed / 4) * 100;
            const circle = document.getElementById('completion-circle');
            const text = document.getElementById('completion-text');
            
            circle.style.strokeDasharray = `${percentage}, 100`;
            text.textContent = `${Math.round(percentage)}%`;
            
            // Change color based on completion
            if (percentage === 100) {
                circle.classList.remove('text-blue-500');
                circle.classList.add('text-green-500');
            } else {
                circle.classList.remove('text-green-500');
                circle.classList.add('text-blue-500');
            }
        }

        // Delete Account
        async function deleteAccount() {
            const confirmation = prompt('Type "DELETE" to confirm account deletion:');
            if (confirmation !== 'DELETE') {
                showToast('Account deletion cancelled', 'info');
                return;
            }

            try {
                // Delete in order: contacts, health_profiles, profiles
                await supabase.from('ice_contacts').delete().eq('user_id', currentUser.id);
                await supabase.from('health_profiles').delete().eq('user_id', currentUser.id);
                await supabase.from('profiles').delete().eq('id', currentUser.id);
                
                await supabase.auth.signOut();
                showToast('Account deleted successfully', 'success');
                setTimeout(() => location.href = '/index.html', 2000);
            } catch (error) {
                showToast('Failed to delete account: ' + error.message, 'error');
            }
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', () => {
            // Load saved language
            const savedLanguage = localStorage.getItem('myqer_language') || 'en';
            document.getElementById('language-selector').value = savedLanguage;
            changeLanguage(savedLanguage);
            
            checkSession();

            // Language selector
            document.getElementById('language-selector').addEventListener('change', (e) => {
                changeLanguage(e.target.value);
            });

            // Identity fields
            ['full_name', 'date_of_birth', 'country', 'national_health_id'].forEach(field => {
                document.getElementById(field).addEventListener('input', (e) => {
                    debouncedSave(field, e.target.value);
                });
            });

            // Health fields
            ['blood_type', 'organ_donor', 'life_support_pref'].forEach(field => {
                document.getElementById(field).addEventListener('change', (e) => {
                    debouncedSave(field, e.target.value, 'health_profiles');
                    if (field === 'life_support_pref') updateTriageBadge();
                });
            });

            // Triage override
            document.getElementById('triage_override').addEventListener('change', (e) => {
                debouncedSave('triage_override', e.target.value, 'health_profiles');
                updateTriageBadge();
            });

            // Pills inputs
            ['allergies', 'conditions', 'medications'].forEach(type => {
                document.getElementById(`${type}-input`).addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        addPill(type, e.target.value);
                        e.target.value = '';
                    }
                });
            });
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97881ad4c68c944e',t:'MTc1Njc2NDcwMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
